<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name"> | David Vargas</title>
<meta property="og:title" content=" | David Vargas" />
<meta name="twitter:title" content=" | David Vargas" />
<meta itemprop="name" content=" | David Vargas" />
<meta name="application-name" content=" | David Vargas" />
<meta property="og:site_name" content="davidvargas.xyz" />

<meta name="description" content="David Vargas&#39;s blog">
<meta itemprop="description" content="David Vargas&#39;s blog" />
<meta property="og:description" content="David Vargas&#39;s blog" />
<meta name="twitter:description" content="David Vargas&#39;s blog" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />

  <link rel="alternate" hreflang="en-gb" href="https://davidvargas.xyz/linux/rhcsa/19.-the-linux-firewall/" title="" />






<meta name="generator" content="Hugo 0.134.3">

    
    <meta property="og:url" content="https://davidvargas.xyz/linux/rhcsa/19.-the-linux-firewall/">
  <meta property="og:site_name" content="David Vargas">
  <meta property="og:title" content="David Vargas">
  <meta property="og:description" content="firewalld Zones firewalld The host-based firewall solution employed in RHEL uses a kernel module called netfilter together with a filtering and packet classification framework called nftables for policing the traffic movement. It also supports other advanced features such as Network Address Translation (NAT) and port forwarding. This firewall solution inspects, modifies, drops, or routes incoming, outgoing, and forwarded network packets based on defined rulesets. Default host-based firewall management service in RHEL Ability to add, modify, or delete firewall rules immediately without disrupting current network connections or restarting the service process. Also allows to save rules persistently so that they are activated automatically at system reboots. Lets you perform management operations at the command line using the firewall-cmd command, graphically using the web console, or manually by editing rules files. Stores the default rules in files located in the /usr/lib/firewalld directory, and those that contain custom rules in the /etc/firewalld directory. The default rules files may be copied to the custom rules directory and modified. firewalld Zones Easier and transparent traffic management. Define policies based on the trust level of network connections and source IP addresses. A network connection can be part of only one zone at a time; A zone can have multiple network connections assigned to it. Zone configuration may include services, ports, and protocols that may be open or closed. May include rules for advanced configuration items such as masquerading, port forwarding, NAT’ing, ICMP filters, and rich language. Rules for each zone are defined and manipulated independent of other zones. Match source ip to zone that matches address &gt; match based on zone the interface is in &gt; matches default zone">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="linux">


    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="David Vargas">
  <meta name="twitter:description" content="firewalld Zones firewalld The host-based firewall solution employed in RHEL uses a kernel module called netfilter together with a filtering and packet classification framework called nftables for policing the traffic movement. It also supports other advanced features such as Network Address Translation (NAT) and port forwarding. This firewall solution inspects, modifies, drops, or routes incoming, outgoing, and forwarded network packets based on defined rulesets. Default host-based firewall management service in RHEL Ability to add, modify, or delete firewall rules immediately without disrupting current network connections or restarting the service process. Also allows to save rules persistently so that they are activated automatically at system reboots. Lets you perform management operations at the command line using the firewall-cmd command, graphically using the web console, or manually by editing rules files. Stores the default rules in files located in the /usr/lib/firewalld directory, and those that contain custom rules in the /etc/firewalld directory. The default rules files may be copied to the custom rules directory and modified. firewalld Zones Easier and transparent traffic management. Define policies based on the trust level of network connections and source IP addresses. A network connection can be part of only one zone at a time; A zone can have multiple network connections assigned to it. Zone configuration may include services, ports, and protocols that may be open or closed. May include rules for advanced configuration items such as masquerading, port forwarding, NAT’ing, ICMP filters, and rich language. Rules for each zone are defined and manipulated independent of other zones. Match source ip to zone that matches address &gt; match based on zone the interface is in &gt; matches default zone">


    

    <link rel="canonical" href="https://davidvargas.xyz/linux/rhcsa/19.-the-linux-firewall/">
    <link href="/style.min.1915b95fdbf4046da0032dde0fb966271ed904fa9c019f9a326d7ce001902895.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="https://davidvargas.xyz/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    
    </head>
<body data-theme = "dark" class="notransition">

<script src="/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js" integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://davidvargas.xyz/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/">
                        home
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/posts/">
                        posts
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/notes/">
                        notes
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/readings/">
                        readings
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/about">
                        about
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
                
                
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title"></h1>
                
            </header>
            
            <div class="page-content">
                <h2 id="firewalld-zones"><code>firewalld</code> Zones</h2>
<h2 id="firewalld"><code>firewalld</code></h2>
<ul>
<li>The host-based firewall solution employed in RHEL uses a kernel module called <strong>netfilter</strong> together with a filtering and packet classification framework called <strong>nftables</strong> for policing the traffic movement.</li>
<li>It also supports other advanced features such as <strong>Network Address Translation (NAT)</strong> and <strong>port forwarding</strong>.</li>
<li>This firewall solution inspects, modifies, drops, or routes incoming, outgoing, and forwarded network packets based on defined rulesets.</li>
<li>Default host-based firewall management service in RHEL</li>
<li>Ability to add, modify, or delete firewall rules immediately without disrupting current network connections or restarting the service process.</li>
<li>Also allows to save rules persistently so that they are activated automatically at system reboots.</li>
<li>Lets you perform management operations at the command line using the <code>firewall-cmd</code> command, graphically using the web console, or manually by editing rules files.</li>
<li>Stores the default rules in files located in the /usr/lib/firewalld directory, and those that contain custom rules in the /etc/firewalld directory.</li>
<li>The default rules files may be copied to the custom rules directory and modified.</li>
</ul>
<h3 id="firewalld-zones-1">firewalld Zones</h3>
<ul>
<li>Easier and transparent traffic management.</li>
<li>Define policies based on the trust level of network connections and source IP addresses.</li>
<li>A network connection can be part of only one zone at a time;</li>
<li>A zone can have multiple network connections assigned to it.</li>
<li>Zone configuration may include services, ports, and protocols that may be open or closed.</li>
<li>May include rules for advanced configuration items such as masquerading, port forwarding, NAT&rsquo;ing, ICMP filters, and rich language.</li>
<li>Rules for each zone are defined and manipulated independent of other zones.</li>
</ul>
<p>Match source ip to zone that matches address &gt; match based on zone the interface is in &gt; matches default zone</p>
<ul>
<li>
<p>firewalld inspects each incoming packet to determine the source IP address and applies the rules of the zone that has a match for the address.</p>
</li>
<li>
<p>In the event no zone configuration matches the address, it associates the packet with the zone that has the network connection defined, and applies the rules of that zone.</p>
</li>
<li>
<p>If neither works, firewalld associates the packet with the default zone, and enforces the rules of the default zone on the packet.</p>
</li>
<li>
<p>Several predefined zone files that may be selected or customized.</p>
</li>
<li>
<p>These files include templates for traffic that must be blocked or dropped, and for traffic that is:</p>
<ul>
<li>public-facing</li>
<li>internal</li>
<li>external</li>
<li>home</li>
<li>public</li>
<li>trusted</li>
<li>work-related.</li>
</ul>
</li>
<li>
<p>public zone is the default zone, and it is activated by default when the firewalld service is started.</p>
</li>
</ul>
<p>Predefined zones sorted based on the trust level from trusted to
untrusted:</p>
<p><strong>trusted</strong></p>
<ul>
<li>Allow all incoming traffic</li>
</ul>
<p><strong>internal</strong></p>
<ul>
<li>Reject all incoming traffic except for what is allowed. Intended for use on internal networks.</li>
</ul>
<p><strong>home</strong></p>
<ul>
<li>Reject all incoming traffic except for what is allowed. Intended for use in homes.</li>
</ul>
<p><strong>work</strong></p>
<ul>
<li>Reject all incoming traffic except for what is allowed. Intended for use at workplaces.</li>
</ul>
<p><strong>dmz</strong></p>
<ul>
<li>Reject all incoming traffic except for what is allowed. Intended for use in publicly accessible demilitarized zones.</li>
</ul>
<p><strong>external</strong></p>
<ul>
<li>Reject all incoming traffic except for what is allowed.</li>
<li>Outgoing IPv4 traffic forwarded through this zone is masqueraded to look like it originated from the IPv4 address of an outgoing network interface.</li>
<li>Intended for use on external networks with masquerading enabled.</li>
</ul>
<p><strong>public</strong></p>
<ul>
<li>Reject all incoming traffic except for what is allowed.</li>
<li>Default zone for any newly added network interfaces.</li>
<li>Intended for us in public places.</li>
</ul>
<p><strong>block</strong></p>
<ul>
<li>Reject all incoming traffic with icmp-host-prohibited message returned.</li>
<li>Intended for use in secure places.</li>
</ul>
<p><strong>drop</strong></p>
<ul>
<li>
<p>Drop all incoming traffic without responding with ICMP errors.</p>
</li>
<li>
<p>Intended for use in highly secure places.</p>
</li>
<li>
<p>For all the predefined zones, outgoing traffic is allowed by default.</p>
</li>
</ul>
<h3 id="zone-configuration-files">Zone Configuration Files</h3>
<ul>
<li>
<p>firewalld stores zone rules in XML format at two locations</p>
<ul>
<li><strong>system-defined rules</strong> in the <em>/usr/lib/firewalld/zones</em> directory
<ul>
<li>can be used as templates for adding new rules, or applied instantly to any available network connection</li>
<li>automatically copied to the /etc/firewalld/zones directory if it is modified with a management tool</li>
</ul>
</li>
<li><strong>user-defined rules</strong> in the <em>/etc/firewalld/zones</em> directory</li>
</ul>
</li>
<li>
<p>can copy the required zone file to the <em>/etc/firewalld/zones</em> directory manually, and make the necessary changes.</p>
</li>
<li>
<p>The firewalld service reads the files saved in this location, and applies the rules defined in them.</p>
</li>
</ul>
<p>View the system Zones:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># ll /usr/lib/firewalld/zones</span>
</span></span><span class="line"><span class="cl">total <span class="m">40</span>
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">312</span> Nov  <span class="m">6</span>  <span class="m">2023</span> block.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">306</span> Nov  <span class="m">6</span>  <span class="m">2023</span> dmz.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">304</span> Nov  <span class="m">6</span>  <span class="m">2023</span> drop.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">317</span> Nov  <span class="m">6</span>  <span class="m">2023</span> external.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">410</span> Nov  <span class="m">6</span>  <span class="m">2023</span> home.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">425</span> Nov  <span class="m">6</span>  <span class="m">2023</span> internal.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">729</span> Feb <span class="m">21</span> 23:44 nm-shared.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">356</span> Nov  <span class="m">6</span>  <span class="m">2023</span> public.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">175</span> Nov  <span class="m">6</span>  <span class="m">2023</span> trusted.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">352</span> Nov  <span class="m">6</span>  <span class="m">2023</span> work.xml
</span></span></code></pre></div><p>View the public zone:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># cat /usr/lib/firewalld/zones/public.xml </span>
</span></span><span class="line"><span class="cl">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;1.0&#34;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span>?&gt;
</span></span><span class="line"><span class="cl">&lt;zone&gt;
</span></span><span class="line"><span class="cl">  &lt;short&gt;Public&lt;/short&gt;
</span></span><span class="line"><span class="cl">  &lt;description&gt;For use in public areas. You <span class="k">do</span> not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.&lt;/description&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;ssh&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;dhcpv6-client&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;cockpit&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;forward/&gt;
</span></span><span class="line"><span class="cl">&lt;/zone&gt;
</span></span></code></pre></div><ul>
<li>See the manual pages for firewalld.zone for details on zone configuration files.</li>
</ul>
<h2 id="firewalld-services">firewalld Services</h2>
<ul>
<li>For easier activation and deactivation of specific rules.</li>
<li>preconfigured firewall rules delineated for various services and stored in different files. \</li>
<li>The rules consist of necessary settings, such as the port number, protocol, and possibly helper modules, to support the loading of the service.</li>
<li>Can be added to a zone.</li>
<li>By default, firewalld blocks all traffic unless a service or port is explicitly opened.</li>
</ul>
<h3 id="service-configuration-files">Service Configuration Files</h3>
<ul>
<li>firewalld stores service rules in XML format at two locations:</li>
<li><strong>system-defined</strong> rules in the <em>/usr/lib/firewalld/services</em> directory
<ul>
<li>Can be used as templates for adding new service rules, or activated instantly. A system service configuration
file is automatically copied to the /etc/firewalld/services directory if
it is modified with a management tool.</li>
</ul>
</li>
<li><strong>user-defined</strong> rules in the <em>/etc/firewalld/services</em> directory.
<ul>
<li>You can copy the required service file to the /etc/firewalld/services directory manually, and make the necessary changes.</li>
</ul>
</li>
<li>Service reads the files saved in this location, and applies the rules defined in them.</li>
</ul>
<p>A listing of the system service files is presented below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">root@server30 ~<span class="o">]</span><span class="c1"># ll /usr/lib/firewalld/services</span>
</span></span><span class="line"><span class="cl">total <span class="m">884</span>
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">352</span> Nov  <span class="m">6</span>  <span class="m">2023</span> afp.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">399</span> Nov  <span class="m">6</span>  <span class="m">2023</span> amanda-client.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">427</span> Nov  <span class="m">6</span>  <span class="m">2023</span> amanda-k5-client.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">283</span> Nov  <span class="m">6</span>  <span class="m">2023</span> amqps.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">273</span> Nov  <span class="m">6</span>  <span class="m">2023</span> amqp.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">285</span> Nov  <span class="m">6</span>  <span class="m">2023</span> apcupsd.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">301</span> Nov  <span class="m">6</span>  <span class="m">2023</span> audit.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">436</span> Nov  <span class="m">6</span>  <span class="m">2023</span> ausweisapp2.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">320</span> Nov  <span class="m">6</span>  <span class="m">2023</span> bacula-client.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">346</span> Nov  <span class="m">6</span>  <span class="m">2023</span> bacula.xml
</span></span><span class="line"><span class="cl">-rw-r--r--. <span class="m">1</span> root root <span class="m">390</span> Nov  <span class="m">6</span>  <span class="m">2023</span> bareos-director.xml
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><p>Shows the content of the ssh service file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server30 ~<span class="o">]</span><span class="c1"># cat /usr/lib/firewalld/services/ssh.xml</span>
</span></span><span class="line"><span class="cl">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;1.0&#34;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span>?&gt;
</span></span><span class="line"><span class="cl">&lt;service&gt;
</span></span><span class="line"><span class="cl">  &lt;short&gt;SSH&lt;/short&gt;
</span></span><span class="line"><span class="cl">  &lt;description&gt;Secure Shell <span class="o">(</span>SSH<span class="o">)</span> is a protocol <span class="k">for</span> logging into and executing commands on remote machines. It provides secure encrypted communications. If you plan on accessing your machine remotely via SSH over a firewalled interface, <span class="nb">enable</span> this option. You need the openssh-server package installed <span class="k">for</span> this option to be useful.&lt;/description&gt;
</span></span><span class="line"><span class="cl">  &lt;port <span class="nv">protocol</span><span class="o">=</span><span class="s2">&#34;tcp&#34;</span> <span class="nv">port</span><span class="o">=</span><span class="s2">&#34;22&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">&lt;/service&gt;
</span></span></code></pre></div><ul>
<li>Has a name and description</li>
<li>Defines the port and protocol for the service.</li>
<li>See the manual pages for firewalld.service for details on service configuration files.</li>
</ul>
<h2 id="firewalld-management">firewalld Management</h2>
<ul>
<li>listing, querying, adding, changing, and removing zones, services, ports, IP sources, and network connections. Three methods:
<ul>
<li><code>firewall-cmd</code></li>
<li>Web interface for graphical administration.</li>
<li>Edit Zone and service templates manually</li>
</ul>
</li>
</ul>
<h3 id="firewall-cmd-command"><code>firewall-cmd</code> Command</h3>
<ul>
<li>Add or remove rules from the runtime configuration, or save any modifications to service configuration for persistence.</li>
<li>Supports numerous options for the management of zones, services, ports, connections, and so on</li>
</ul>
<h3 id="common-options">Common options</h3>
<h4 id="general">General</h4>
<p><strong>--state</strong></p>
<ul>
<li>Displays the running status of firewalld</li>
</ul>
<p><strong>--reload</strong></p>
<ul>
<li>Reloads firewall rules from zone files. All runtime changes are lost.</li>
</ul>
<p><strong>--permanent</strong></p>
<ul>
<li>Stores a change persistently. The change only becomes active after a service reload or restart.</li>
</ul>
<h4 id="zones">Zones</h4>
<p><strong>--get-default-zone</strong></p>
<ul>
<li>Shows the name of the default/active zone</li>
</ul>
<p><strong>--set-default-zone</strong></p>
<ul>
<li>Changes the default zone for both runtime and permanent configuration</li>
</ul>
<p><strong>--get-zones</strong></p>
<ul>
<li>Prints a list of available zones</li>
</ul>
<p><strong>&ndash;get-active-zones</strong></p>
<ul>
<li>Displays the active zone and the assigned interfaces</li>
</ul>
<p><strong>--list-all</strong></p>
<ul>
<li>Lists all settings for a zone</li>
</ul>
<p><strong>--list-all-zones</strong></p>
<ul>
<li>Lists the settings for all available zones</li>
</ul>
<p><strong>&ndash;zone</strong></p>
<ul>
<li>Specifies the name of the zone to work on. Without this option, the default zone is used.</li>
</ul>
<h4 id="services">Services</h4>
<p><strong>--get-services</strong></p>
<ul>
<li>Prints predefined services</li>
</ul>
<p><strong>--list-services</strong></p>
<ul>
<li>Lists services for a zone</li>
</ul>
<p><strong>--add-service</strong></p>
<ul>
<li>Adds a service to a zone</li>
</ul>
<p><strong>--remove-service</strong></p>
<ul>
<li>Removes a service from a zone</li>
</ul>
<p><strong>--query-service</strong></p>
<ul>
<li>Queries for the presence of a service</li>
</ul>
<h4 id="ports">Ports</h4>
<p><strong>--list-ports</strong></p>
<ul>
<li>Lists network ports</li>
</ul>
<p><strong>--add-port</strong></p>
<ul>
<li>Adds a port or a range of ports to a zone</li>
</ul>
<p><strong>--remove-port</strong></p>
<ul>
<li>Removes a port from a zone</li>
</ul>
<p><strong>--query-port</strong></p>
<ul>
<li>Queries for the presence of a port</li>
</ul>
<h4 id="network-connections">Network Connections</h4>
<p><strong>--list-interfaces</strong></p>
<ul>
<li>Lists network connections assigned to a zone</li>
</ul>
<p><strong>--add-interface</strong></p>
<ul>
<li>Binds a network connection to a zone</li>
</ul>
<p><strong>--change-interface</strong></p>
<ul>
<li>Changes the binding of a network connection to a different zone</li>
</ul>
<p><strong>--remove-interface</strong></p>
<ul>
<li>Unbinds a network connection from a zone</li>
</ul>
<h4 id="ip-sources">IP Sources</h4>
<p><strong>--list-sources</strong></p>
<ul>
<li>Lists IP sources assigned to a zone</li>
</ul>
<p><strong>--add-source</strong></p>
<ul>
<li>Adds an IP source to a zone</li>
</ul>
<p><strong>--change-source</strong></p>
<ul>
<li>Changes an IP source</li>
</ul>
<p><strong>--remove-source</strong></p>
<ul>
<li>Removes an IP source from a zone</li>
</ul>
<hr>
<p><strong>--add and --remove options</strong></p>
<ul>
<li>--permanent switch may be specified to ensure the rule is stored in the zone configuration file under the <em>/etc/firewalld/zones</em> directory for persistence.</li>
</ul>
<h3 id="querying-the-operational-status-of-firewalld">Querying the Operational Status of firewalld</h3>
<p>Check the running status of the firewalld service using either the <code>systemctl</code> or the <code>firewall-cmd</code> command.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --state</span>
</span></span><span class="line"><span class="cl">running
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># systemctl status firewalld -l --no-pager</span>
</span></span><span class="line"><span class="cl">● firewalld.service - firewalld - dynamic firewall daemon
</span></span><span class="line"><span class="cl">     Loaded: loaded <span class="o">(</span>/usr/lib/systemd/system/firewalld.service<span class="p">;</span> enabled<span class="p">;</span> preset: enabled<span class="o">)</span>
</span></span><span class="line"><span class="cl">     Active: active <span class="o">(</span>running<span class="o">)</span> since Thu 2024-07-25 13:25:21 MST<span class="p">;</span> 44min ago
</span></span><span class="line"><span class="cl">       Docs: man:firewalld<span class="o">(</span>1<span class="o">)</span>
</span></span><span class="line"><span class="cl">   Main PID: <span class="m">829</span> <span class="o">(</span>firewalld<span class="o">)</span>
</span></span><span class="line"><span class="cl">      Tasks: <span class="m">2</span> <span class="o">(</span>limit: 11108<span class="o">)</span>
</span></span><span class="line"><span class="cl">     Memory: 43.9M
</span></span><span class="line"><span class="cl">        CPU: 599ms
</span></span><span class="line"><span class="cl">     CGroup: /system.slice/firewalld.service
</span></span><span class="line"><span class="cl">             └─829 /usr/bin/python3 -s /usr/sbin/firewalld --nofork --nopid
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Jul <span class="m">25</span> 13:25:21 server20 systemd<span class="o">[</span>1<span class="o">]</span>: Starting firewalld - dynamic firewall daemon...
</span></span><span class="line"><span class="cl">Jul <span class="m">25</span> 13:25:21 server20 systemd<span class="o">[</span>1<span class="o">]</span>: Started firewalld - dynamic firewall daemon.
</span></span></code></pre></div><h3 id="lab-add-services-and-ports-and-manage-zones">Lab: Add Services and Ports, and Manage Zones</h3>
<ul>
<li>Determine the current active zone.</li>
<li>Add and activate a permanent rule to allow HTTP traffic on port 80</li>
<li>Add a runtime rule for traffic intended for TCP port 443 (the HTTPS service).</li>
<li>Add a permanent rule to the internal zone for TCP port range 5901 to 5910.</li>
<li>Confirm the changes and display the contents of the affected zone files.</li>
<li>Switch the default zone to the internal zone and activate it.</li>
</ul>
<p>1. Determine the name of the current default zone:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --get-default-zone</span>
</span></span><span class="line"><span class="cl">public
</span></span></code></pre></div><p>2. Add a permanent rule to allow HTTP traffic on its default port:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --permanent --add-service http</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><p>The command made a copy of the <em>public.xml</em> file from <em>/usr/lib/firewalld/zones</em> directory into the <em>/etc/firewalld/zones</em> directory, and added the rule for the HTTP service.</p>
<p>3. Activate the new rule:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --reload</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><p>4. Confirm the activation of the new rule:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --list-services</span>
</span></span><span class="line"><span class="cl">cockpit dhcpv6-client http nfs ssh
</span></span></code></pre></div><p>5. Display the content of the default zone file to confirm the addition of the permanent rule:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># cat /etc/firewalld/zones/public.xml</span>
</span></span><span class="line"><span class="cl">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;1.0&#34;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span>?&gt;
</span></span><span class="line"><span class="cl">&lt;zone&gt;
</span></span><span class="line"><span class="cl">  &lt;short&gt;Public&lt;/short&gt;
</span></span><span class="line"><span class="cl">  &lt;description&gt;For use in public areas. You <span class="k">do</span> not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.&lt;/description&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;ssh&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;dhcpv6-client&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;cockpit&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;nfs&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;http&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;forward/&gt;
</span></span><span class="line"><span class="cl">&lt;/zone&gt;
</span></span></code></pre></div><p>6. Add a runtime rule to allow traffic on TCP port 443 and verify:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --add-port 443/tcp</span>
</span></span><span class="line"><span class="cl">success
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --list-ports</span>
</span></span><span class="line"><span class="cl">443/tcp
</span></span></code></pre></div><p>7. Add a permanent rule to the internal zone for TCP port range 5901 to 5910:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --add-port 5901-5910/tcp --permanent --zone internal</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><p>8. Display the content of the internal zone file to confirm the addition of the permanent rule:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># cat /etc/firewalld/zones/internal.xml</span>
</span></span><span class="line"><span class="cl">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;1.0&#34;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span>?&gt;
</span></span><span class="line"><span class="cl">&lt;zone&gt;
</span></span><span class="line"><span class="cl">  &lt;short&gt;Internal&lt;/short&gt;
</span></span><span class="line"><span class="cl">  &lt;description&gt;For use on internal networks. You mostly trust the other computers on the networks to not harm your computer. Only selected incoming connections are accepted.&lt;/description&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;ssh&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;mdns&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;samba-client&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;dhcpv6-client&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;cockpit&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;port <span class="nv">port</span><span class="o">=</span><span class="s2">&#34;5901-5910&#34;</span> <span class="nv">protocol</span><span class="o">=</span><span class="s2">&#34;tcp&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;forward/&gt;
</span></span><span class="line"><span class="cl">&lt;/zone&gt;
</span></span></code></pre></div><ul>
<li>The firewall-cmd command makes a backup of the affected zone file with a .old extension whenever an update is made to a zone.</li>
</ul>
<p>9. Switch the default zone to internal and confirm:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --set-default-zone internal</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --get-default-zone</span>
</span></span><span class="line"><span class="cl">internal
</span></span></code></pre></div><p>10. Activate the rules defined in the internal zone and list the port range added earlier:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --list-ports</span>
</span></span><span class="line"><span class="cl">5901-5910/tcp
</span></span></code></pre></div><h3 id="lab-remove-services-and-ports-and-manage-zones">Lab: Remove Services and Ports, and Manage Zones</h3>
<ul>
<li>Remove the two permanent rules that were added in the last lab.</li>
<li>Switch the public zone back as the default zone, and confirm the changes.</li>
</ul>
<p>1. Remove the permanent rule for HTTP from the public zone:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --remove-service=http --zone public --permanent</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><ul>
<li>Must specify public zone as it is not the current default.</li>
</ul>
<p>2. Remove the permanent rule for ports 5901 to 5910 from the internal zone:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --remove-port 5901-5910/tcp --permanent</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><p>3. Switch the default zone to public and validate:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --set-default-zone=public</span>
</span></span><span class="line"><span class="cl">success
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --get-default-zone </span>
</span></span><span class="line"><span class="cl">public
</span></span></code></pre></div><p>4. Activate the public zone rules, and list the current services:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --reload</span>
</span></span><span class="line"><span class="cl">success
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --list-services</span>
</span></span><span class="line"><span class="cl">cockpit dhcpv6-client nfs ssh
</span></span></code></pre></div><h3 id="lab-test-the-effect-of-firewall-rule">Lab: Test the Effect of Firewall Rule</h3>
<ul>
<li>Remove the sshd service rule from the runtime configuration on server20</li>
<li>Try to access the server from server10 using the ssh command.</li>
</ul>
<p>1. Remove the rule for the sshd service on server20:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --remove-service ssh</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><p>2. Issue the ssh command on server10 to access server20:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server10 ~<span class="o">]</span><span class="c1"># ssh 192.168.0.37</span>
</span></span><span class="line"><span class="cl">ssh: connect to host 192.168.0.37 port 22: No route to host
</span></span></code></pre></div><p>3. Add the rule back for sshd on server20:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 zones<span class="o">]</span><span class="c1"># firewall-cmd --add-service ssh</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><p>4. Issue the ssh command on server10 to access server20. Enter &ldquo;yes&rdquo; if
prompted and the password for user1.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server10 ~<span class="o">]</span><span class="c1"># ssh 192.168.0.37</span>
</span></span><span class="line"><span class="cl">The authenticity of host <span class="s1">&#39;192.168.0.37 (192.168.0.37)&#39;</span> can<span class="s1">&#39;t be established.
</span></span></span><span class="line"><span class="cl"><span class="s1">ED25519 key fingerprint is SHA256:Z8nFu0Jj1ASZeXByiy3aAWHpUhGhUmDCr+Omu/iWTjs.
</span></span></span><span class="line"><span class="cl"><span class="s1">This key is not known by any other names
</span></span></span><span class="line"><span class="cl"><span class="s1">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
</span></span></span><span class="line"><span class="cl"><span class="s1">Warning: Permanently added &#39;</span>192.168.0.37<span class="s1">&#39; (ED25519) to the list of known hosts.
</span></span></span><span class="line"><span class="cl"><span class="s1">root@192.168.0.37&#39;</span>s password: 
</span></span><span class="line"><span class="cl">Web console: https://server20:9090/ or https://192.168.0.37:9090/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Register this system with Red Hat Insights: insights-client --register
</span></span><span class="line"><span class="cl">Create an account or view all your systems at https://red.ht/insights-dashboard
</span></span><span class="line"><span class="cl">Last login: Thu Jul <span class="m">25</span> 13:37:47 <span class="m">2024</span> from 192.168.0.21
</span></span></code></pre></div><h2 id="the-linux-firewall-review-questions">The Linux Firewall Review Questions</h2>
<p>Q. A firewall can be configured between two networks but not between two hosts. True or False?
A. False. A firewall can also be configured between two host computers.</p>
<hr>
<p>Q. After changing the default firewalld zone to internal, what would you run to verify?
A. You run <code>firewall-cmd --get-default-zone</code> for validation.</p>
<hr>
<p>Q. What is the process of data packet formation called?
A. The process of data packet formation is called encapsulation.</p>
<hr>
<p>Q. What would the command <code>firewall-cmd --remove-port=5000/tcp</code> do?
A. The command provided will remove the runtime firewall rule for TCP port 5000.</p>
<hr>
<p>Q. What is the primary command line tool for managing firewalld called?
A. The primary command line tool for managing firewalld is called <code>firewall-cmd</code>.</p>
<hr>
<p>Q. What would the command <code>firewall-cmd --permanent --add-service=nfs --zone=external</code> do?
A. The command provided will add the nfs service to external firewalld zone persistently.</p>
<hr>
<p>Q. If you have a set of firewall rules defined for a service stored under both <em>/etc/firewalld</em> and <em>/usr/lib/firewalld</em> directories, which of the two sets will take precedence?
A. The ruleset located in the <em>/etc/firewalld</em> directory will have precedence.</p>
<hr>
<p>Q. What is the kernel module in RHEL 9 that implements the host-level protection called?
A. The kernel module that implements the host-level protection is called <strong>netfilter</strong>.</p>
<hr>
<p>Q. <strong>firewalld</strong> is the firewall management solution in RHEL 9. True or False?
A. True.</p>
<hr>
<p>Q. Which directory stores the configuration file for modified firewalld zones?
A. The modified firewalld zone files are stored under <em>/etc/firewalld/zones</em> directory.</p>
<hr>
<p>Q. Name the default firewalld zone.
A. The default firewalld zone is the public zone.</p>
<hr>
<p>Q. What is the purpose of firewalld service configuration files?
A. firewalld service configuration files store service-specific port, protocol, and other details, which makes it easy to activate and deactivate them.</p>
<h1 id="the-linux-firewall-diy-labs">The Linux Firewall DIY Labs</h1>
<h3 id="lab-add-service-to-firewall">Lab: Add Service to Firewall</h3>
<ul>
<li>Add and activate a permanent rule for HTTPs traffic to the default zone.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --add-service https --permanent</span>
</span></span><span class="line"><span class="cl">success
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --reload</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><ul>
<li>Confirm the change by viewing the zone&rsquo;s XML file and running the <code>firewall-cmd</code> command.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># cat /etc/firewalld/zones/public.xml</span>
</span></span><span class="line"><span class="cl">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;1.0&#34;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span>?&gt;
</span></span><span class="line"><span class="cl">&lt;zone&gt;
</span></span><span class="line"><span class="cl">  &lt;short&gt;Public&lt;/short&gt;
</span></span><span class="line"><span class="cl">  &lt;description&gt;For use in public areas. You <span class="k">do</span> not trust the other computers on networks to not harm your computer. Only selected incoming connections are accepted.&lt;/description&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;ssh&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;dhcpv6-client&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;cockpit&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;nfs&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;service <span class="nv">name</span><span class="o">=</span><span class="s2">&#34;https&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;forward/&gt;
</span></span><span class="line"><span class="cl">&lt;/zone&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --list-services</span>
</span></span><span class="line"><span class="cl">cockpit dhcpv6-client https nfs ssh
</span></span></code></pre></div><h3 id="lab-add-port-range-to-firewall">Lab: Add Port Range to Firewall</h3>
<ul>
<li>Add and activate a permanent rule for the UDP port range 8000 to 8005 to the trusted zone.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --add-port 8000-8005/udp --zone trusted --permanent</span>
</span></span><span class="line"><span class="cl">success
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --reload</span>
</span></span><span class="line"><span class="cl">success
</span></span></code></pre></div><ul>
<li>Confirm the change by viewing the zone&rsquo;s XML file and running the <code>firewall-cmd</code> command.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># firewall-cmd --list-ports --zone trusted</span>
</span></span><span class="line"><span class="cl">8000-8005/udp
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@server20 ~<span class="o">]</span><span class="c1"># cat /etc/firewalld/zones/trusted.xml </span>
</span></span><span class="line"><span class="cl">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">&#34;1.0&#34;</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span>?&gt;
</span></span><span class="line"><span class="cl">&lt;zone <span class="nv">target</span><span class="o">=</span><span class="s2">&#34;ACCEPT&#34;</span>&gt;
</span></span><span class="line"><span class="cl">  &lt;short&gt;Trusted&lt;/short&gt;
</span></span><span class="line"><span class="cl">  &lt;description&gt;All network connections are accepted.&lt;/description&gt;
</span></span><span class="line"><span class="cl">  &lt;port <span class="nv">port</span><span class="o">=</span><span class="s2">&#34;8000-8005&#34;</span> <span class="nv">protocol</span><span class="o">=</span><span class="s2">&#34;udp&#34;</span>/&gt;
</span></span><span class="line"><span class="cl">  &lt;forward/&gt;
</span></span><span class="line"><span class="cl">&lt;/zone&gt;
</span></span></code></pre></div>
            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/davidvargasxyz" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://keybase.io/" target="_blank" rel="noopener noreferrer me"
    title="Keybase">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 76.3" version="1.1" fill="currentColor" stroke="none">
    <path
        d="M6.68 73.99c-.6-1.3-1.4-3.1-1.8-4l-.6-1.7-2 2.2-2 2.2-.2-4.2c-.3-6 .2-12.2 1.2-16.6 2.3-9.8 9.5-18.7 18.8-23.4l2.1-1-.5-1.5c-.3-.8-.6-2.5-.7-3.6l-.2-2.1-2.1-.2c-3.2-.3-4.9-1.2-6-3.5-.6-1.2-.6-1.4-.4-4.6.2-4.2.5-5.1 1.8-6.5 1.6-1.8 2.7-2.1 6.7-1.9 2.9.2 3.5.3 4.8.9.8.4 1.5.8 1.6.8.1 0 1-1.1 2.1-2.6l1.9-2.7 1.2.7c.7.4 1.5.9 1.9 1.1l.7.4-.6 1.5c-.3.8-.7 2.2-.8 2.9l-.2 1.4 1.7.2c6.1.6 10.7 4.3 12.4 9.9.5 1.8.5 5.3 0 7-.5 1.6-.5 1.7-.1 1.7.7 0 5.4 2.3 7.3 3.5 3.7 2.4 8 6.6 10.4 10.2 4.5 6.7 6.4 14 5.6 22-.4 4.8-1.3 8.6-2.9 12.3l-.6 1.4h-5l1.2-2.4c1.3-2.6 2.3-6.2 2.8-9.4.3-2.2.4-8.2.1-9.3l-.2-.7-1.3 1.4c-3.2 3.5-7.9 4.5-14.2 2.8-5.4-1.4-7.6-1.7-12.7-1.7-3.9 0-5.2.1-7.3.6-5.8 1.3-9.9 3.2-15.6 7.3-2.1 1.5-3.8 2.7-3.9 2.7-.1 0 .2-1 .6-2.3.4-1.3 1.1-3.4 1.5-4.8l.8-2.5-.9.9c-.5.5-1.9 1.9-3.1 3.2l-2.1 2.3.5 1.9c.6 2.5 2 5.6 3.5 7.9.6 1 1.1 1.8 1.1 1.9s-1.2.1-2.6.1h-2.6l-1.1-2.1zm8.8-24.2c4.8-5.1 8.7-9.2 8.8-9.2.1.1-.4 1.6-.9 3.3-3.3 10.4-4 12.4-3.9 12.5 0 0 1.2-.4 2.5-.9 8.5-3.7 18.4-4.2 28.9-1.4 4.7 1.2 6.5 1.2 8.8 0 1.3-.7 1.8-1.1 2.4-2.1 1.1-1.7 1.2-4.1.5-6.3-1.7-4.8-8.3-11-14.5-13.7-3.2-1.4-3.4-1.4-4.1-.7l-.6.6 2.6 3.2c1.4 1.7 2.9 3.6 3.1 4.1.6 1.2.7 3.1.1 4.3-.8 1.7-3.2 2.9-5.1 2.5-.8-.2-1.1-.1-1.9.5-2.2 1.6-4.6 1.2-6.6-1.2-1.6-1.8-2-2.7-2.1-4.5 0-.9-.3-2-.5-2.4-.3-.6-.4-1.3-.4-2.2l.1-1.4-1.3-.3c-1.8-.5-3.9-1.5-5.1-2.4-.6-.4-1.1-.8-1.3-.8s-1.5.6-2.9 1.3c-9.7 5-16 14.3-17 24.8-.1 1-.2 2.3-.3 2.8l-.1.9 1.1-1.1c.5-.5 4.9-5.1 9.7-10.2zm25.9-7.4c.9-.7 1.7-1.3 1.9-1.3.1 0 .4.3.7.7.5.8 1.4.8 1.8.1.3-.5.3-.6-5.6-7.8-3.5-4.3-4.2-5-4.7-5-1.2.1-.9 1 1 3.3l1.8 2.2-1 .8c-1.1 1-1.2 1.2-.5 1.8.5.5.6.4 1.6-.3l1.1-.7.7.6c.4.3.6.8.6.9 0 .2-.8.9-1.7 1.7-.9.7-1.6 1.5-1.6 1.7 0 .3.5 1.1 1.4 2.2.3.6.8.4 2.5-.9zm-10.3-14.2c.6-1.8 2.6-3.2 4.6-3.2 1.1 0 2.7.9 3.8 2.1l1 1.2.9-1.1c2.5-2.8 2.8-6.7.8-10.1-1.5-2.5-4.3-4-8.2-4.4-2.1-.2-2.6-.4-3.7-1.5l-.8-.8-.4.6c-.8 1.2-2.5 5.1-3 6.6-.7 2.3-.4 5.9.5 7.7.9 1.7 3.3 4 4 3.7.1.1.3-.3.5-.8zm-8.9-13.6c.2-.5.7-1.8 1.2-2.8.5-1 .9-2 .9-2.3 0-.9-1-1.3-3.7-1.5-2.4-.2-2.6-.1-3.1.4-.4.4-.6.9-.6 1.6 0 .6-.1 1.7-.2 2.6-.2 2.1.1 2.5 2.2 2.8 3.1.2 3 .2 3.3-.8zm-3.1-2.4c0-1.7.2-1.9 1.6-1.9h1.3v2.8h-2.8v-.9zm6.3 58.3c-.6-.6-.8-1-.8-2 0-1.9 1.1-3 2.9-3 1.7 0 2.9 1.2 2.9 2.9 0 1.8-1.1 2.8-3 2.9-1 0-1.4-.2-2-.8zm19.3.3a2.93 2.93 0 011.8-5.3c1.8 0 2.8 1.1 2.9 3 0 1.1-.1 1.4-.8 2s-1 .8-2 .8c-.9 0-1.5-.2-1.9-.5z" />
</svg>
</a>
<a href="index.xml" target="_blank" rel="noopener noreferrer me"
    title="Rss">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2024 David Vargas.
        Powered by <a href="https://github.com/hugo-sid/hugo-blog-awesome" target="_blank" rel="noopener">Hugo blog awesome</a>.
    </small>
</footer><a href="#" title="Go to top" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    






    
    <script src="https://davidvargas.xyz/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js" integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30&#43;lSNuSkl4QXuNyy8="></script>

    

</body>
</html>
