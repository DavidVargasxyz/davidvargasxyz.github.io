<!DOCTYPE html>
<html lang="en-us"><head><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name"> | My New Hugo Site</title>
<meta property="og:title" content=" | My New Hugo Site" />
<meta name="twitter:title" content=" | My New Hugo Site" />
<meta itemprop="name" content=" | My New Hugo Site" />
<meta name="application-name" content=" | My New Hugo Site" />
<meta property="og:site_name" content="" />

<meta name="description" content="">
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />

  <link rel="alternate" hreflang="en" href="https://example.org/linux/rhcsa/21.-shell-scripting/" title="" />






<meta name="generator" content="Hugo 0.134.3">

    
    <meta property="og:url" content="https://example.org/linux/rhcsa/21.-shell-scripting/">
  <meta property="og:site_name" content="My New Hugo Site">
  <meta property="og:title" content="My New Hugo Site">
  <meta property="og:description" content="Shell Scripts A group of Linux commands along with control structures and optional comments stored in a text file.
Can be executed directly at the Linux command prompt.
Do not need to be compiled as they are interpreted by the shell line by line.
managing packages and users, administering partitions and file systems, monitoring file system utilization, trimming log files, archiving and compressing files, finding and removing unnecessary files, starting and stopping database services and applications, and producing reports.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="linux">


    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="My New Hugo Site">
  <meta name="twitter:description" content="Shell Scripts A group of Linux commands along with control structures and optional comments stored in a text file.
Can be executed directly at the Linux command prompt.
Do not need to be compiled as they are interpreted by the shell line by line.
managing packages and users, administering partitions and file systems, monitoring file system utilization, trimming log files, archiving and compressing files, finding and removing unnecessary files, starting and stopping database services and applications, and producing reports.">


    

    <link rel="canonical" href="https://example.org/linux/rhcsa/21.-shell-scripting/">
    <link href="/style.min.e390ba7da26222f4dc42a349955d76dbbe44e5ce2535a43de5a70633a0a9ec3c.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="https://example.org/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    
    </head>
<body data-theme = "" class="notransition">

<script src="/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js" integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="https://example.org/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title></title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
                
                
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title"></h1>
                
            </header>
            
            <div class="page-content">
                <h2 id="shell-scripts">Shell Scripts</h2>
<ul>
<li>
<p>A group of Linux commands along with control structures and optional comments stored in a text file.</p>
</li>
<li>
<p>Can be executed directly at the Linux command prompt.</p>
</li>
<li>
<p>Do not need to be compiled as they are interpreted by the shell line by line.</p>
</li>
<li>
<p>managing packages and users, administering partitions and file systems, monitoring file system utilization, trimming log files, archiving and compressing files, finding and removing unnecessary files, starting and stopping database services and applications, and producing reports.</p>
</li>
<li>
<p>Run by the shell one at a time in the order in which they are listed.</p>
</li>
<li>
<p>Each line is executed as if it is typed and run at the command prompt.</p>
</li>
<li>
<p>Control structures are utilized for creating and managing conditional and looping constructs.</p>
</li>
<li>
<p>Comments are also generally included to add information about the script such as the author name, creation date, previous modification dates, purpose, and usage.</p>
</li>
<li>
<p>If the script encounters an error during execution, the error message is printed on the screen.</p>
</li>
<li>
<p>Can use the nl command to enumerate the lines for troubleshooting.</p>
</li>
<li>
<p>Can store your scripts in the <em>/usr/local/bin</em> directory, which is included in the PATH of all users by default.</p>
</li>
</ul>
<h3 id="script01-displaying-system-information">Script01: Displaying System Information</h3>
<ul>
<li>Create the first script called <em>sys_info.sh</em> in <em>/usr/local/bin/</em></li>
<li>Use the vim editor with sudo to write the script.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>echo <span style="color:#e6db74">&#34;Display Basic System Information&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;==================================&#34;</span>
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The hostname, hardware, and OS information is:&#34;</span>
</span></span><span style="display:flex;"><span>/usr/bin/hostnamectl
</span></span><span style="display:flex;"><span>echo
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The Following users are currently logged in:&#34;</span>
</span></span><span style="display:flex;"><span>/usr/bin/who
</span></span></code></pre></div><ul>
<li>Within vim, press the ESC key and then type :set nu to view line numbers associated with each line entry.</li>
<li>Must add execute bit to run the script</li>
</ul>
<h3 id="executing-a-script">Executing a Script</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>chmod +x /usr/local/bin/sys_info.sh<span style="color:#f92672">](</span>&lt;<span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/sys_info.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># ll /usr/local/bin/sys_info.sh</span>
</span></span><span style="display:flex;"><span>-rwxr-xr-x. <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">244</span> Jul <span style="color:#ae81ff">30</span> 09:47 /usr/local/bin/sys_info.sh&gt;<span style="color:#f92672">)</span>
</span></span></code></pre></div><ul>
<li>Any user on the system can now run this script using either its name or the full path.</li>
</ul>
<p>Let&rsquo;s run the script and see what the output will look like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># /usr/local/bin/sys_info.sh</span>
</span></span><span style="display:flex;"><span>Display Basic System Information
</span></span><span style="display:flex;"><span><span style="color:#f92672">==================================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm 🖴
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd619754…
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4f…
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux…
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise…
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el…
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#f92672">(</span>172.16.7.95<span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="debugging-a-script">Debugging a Script</h3>
<p>Can either append the <code>-x</code> option to the &ldquo;<code>#!/bin/bash</code>&rdquo; at the beginning of the script to look like &ldquo;<code>#!/bin/bash -x</code>&rdquo;, or execute the script as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># bash -x sys_info.sh</span>
</span></span><span style="display:flex;"><span>+ echo <span style="color:#e6db74">&#39;Display Basic System Information&#39;</span>
</span></span><span style="display:flex;"><span>Display Basic System Information
</span></span><span style="display:flex;"><span>+ echo <span style="color:#f92672">==================================</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">==================================</span>
</span></span><span style="display:flex;"><span>+ echo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ echo <span style="color:#e6db74">&#39;The hostname, hardware, and OS information is:&#39;</span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span>+ /usr/bin/hostnamectl
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm 🖴
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd6197548ce77270
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4fd3fe19ee
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux 9.3 <span style="color:#f92672">(</span>Plow<span style="color:#f92672">)</span>     
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise_linux:9::baseos
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el9_3.x86_64
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>+ echo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ echo <span style="color:#e6db74">&#39;The Following users are currently logged in:&#39;</span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>+ /usr/bin/who
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#f92672">(</span>172.16.7.95<span style="color:#f92672">)</span>
</span></span></code></pre></div><ul>
<li>Actual lines from the script prefixed by the + sign and followed by the command execution result.</li>
<li>Shows the line number of the problem line in the output if there is any.</li>
<li>This way you can identify any issues pertaining to the path, command name, use of special characters, etc., and address it quickly.</li>
</ul>
<p>Change one of the echo commands in the script to &ldquo;iecho&rdquo; and re-run the script in the debug mode to see the error:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># bash -x sys_info.sh</span>
</span></span><span style="display:flex;"><span>+ echo <span style="color:#e6db74">&#39;Display Basic System Information&#39;</span>
</span></span><span style="display:flex;"><span>Display Basic System Information
</span></span><span style="display:flex;"><span>+ echo <span style="color:#f92672">==================================</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">==================================</span>
</span></span><span style="display:flex;"><span>+ iecho
</span></span><span style="display:flex;"><span>/usr/local/bin/sys_info.sh: line 4: iecho: command not found
</span></span><span style="display:flex;"><span>+ echo <span style="color:#e6db74">&#39;The hostname, hardware, and OS information is:&#39;</span>
</span></span><span style="display:flex;"><span>The hostname, hardware, and OS information is:
</span></span><span style="display:flex;"><span>+ /usr/bin/hostnamectl
</span></span><span style="display:flex;"><span> Static hostname: server30
</span></span><span style="display:flex;"><span>       Icon name: computer-vm
</span></span><span style="display:flex;"><span>         Chassis: vm 🖴
</span></span><span style="display:flex;"><span>      Machine ID: eaa6174e108d4a27bd6197548ce77270
</span></span><span style="display:flex;"><span>         Boot ID: 13d8b3c167b24757b3678e4fd3fe19ee
</span></span><span style="display:flex;"><span>  Virtualization: oracle
</span></span><span style="display:flex;"><span>Operating System: Red Hat Enterprise Linux 9.3 <span style="color:#f92672">(</span>Plow<span style="color:#f92672">)</span>     
</span></span><span style="display:flex;"><span>     CPE OS Name: cpe:/o:redhat:enterprise_linux:9::baseos
</span></span><span style="display:flex;"><span>          Kernel: Linux 5.14.0-362.24.1.el9_3.x86_64
</span></span><span style="display:flex;"><span>    Architecture: x86-64
</span></span><span style="display:flex;"><span> Hardware Vendor: innotek GmbH
</span></span><span style="display:flex;"><span>  Hardware Model: VirtualBox
</span></span><span style="display:flex;"><span>Firmware Version: VirtualBox
</span></span><span style="display:flex;"><span>+ echo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>+ echo <span style="color:#e6db74">&#39;The Following users are currently logged in:&#39;</span>
</span></span><span style="display:flex;"><span>The Following users are currently logged in:
</span></span><span style="display:flex;"><span>+ /usr/bin/who
</span></span><span style="display:flex;"><span>root     pts/0        2024-07-30 07:22 <span style="color:#f92672">(</span>172.16.7.95<span style="color:#f92672">)</span>
</span></span></code></pre></div><h3 id="script02-using-local-variables">Script02: Using Local Variables</h3>
<ul>
<li>Create a script called <em>use_var.sh</em> will</li>
<li>Define a local variable and display its value on the screen.</li>
<li>Re-check the value of the variable after the script execution has completed.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># vim /usr/local/bin/use_var.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Setting a Local Variable&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;========================&#34;</span>
</span></span><span style="display:flex;"><span>SYSNAME<span style="color:#f92672">=</span>server30.example.com
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The hostname of this system is </span>$SYSNAME<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/use_var.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># use_var.sh</span>
</span></span><span style="display:flex;"><span>Setting a Local Variable
</span></span><span style="display:flex;"><span><span style="color:#f92672">========================</span>
</span></span><span style="display:flex;"><span>The hostname of this system is server30.example.com
</span></span></code></pre></div><p>If you run the echo command to see what is stored in the SYSNAME
variable, you will get nothing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># echo $SYSNAME</span>
</span></span></code></pre></div><h3 id="script03-using-pre-defined-environment-variables">Script03: Using Pre-Defined Environment Variables</h3>
<p>The following script called pre_env.sh will display the values of SHELL and LOGNAME environment variables:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># vim /usr/local/bin/pre_env.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The location of my shell command is:&#34;</span>
</span></span><span style="display:flex;"><span>echo $SHELL
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;I am logged in as </span>$LOGNAME<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/pre_env.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># pre_env.sh</span>
</span></span><span style="display:flex;"><span>The location of my shell command is:
</span></span><span style="display:flex;"><span>/bin/bash
</span></span><span style="display:flex;"><span>I am logged in as root
</span></span></code></pre></div><h3 id="script04-using-command-substitution">Script04: Using Command Substitution</h3>
<ul>
<li>
<p>Can use the command substitution feature of the bash shell and store the output generated by the command
into a variable.</p>
</li>
<li>
<p>Two different ways to use command substitution: Backtics or subshell</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>SYSNAME<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>hostname<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>KERNVER<span style="color:#f92672">=</span><span style="color:#e6db74">`</span>uname -r<span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The hostname is </span>$SYSNAME<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The kernel version is </span>$KERNVER<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># vim /usr/local/bin/cmd_out.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/cmd_out.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># cmd_out.sh</span>
</span></span><span style="display:flex;"><span>The hostname is server30
</span></span><span style="display:flex;"><span>The kernel version is 5.14.0-362.24.1.el9_3.x86_64
</span></span></code></pre></div><h1 id="shell-parameters">Shell Parameters</h1>
<ul>
<li>An entity that holds a value such as a name, special character, or number.</li>
<li>The parameter that holds a <strong>name</strong> is referred to as a <strong>variable</strong></li>
<li>a <strong>special character</strong> is referred to as a <strong>special parameter</strong>
<ul>
<li>represents the command or script itself ($0), count of supplied arguments ($* or $@), all arguments ($#), and PID of the process ($$)</li>
</ul>
</li>
<li>one or more digits, except for 0 is referred to as a <strong>positional parameter</strong> (a command line argument).
<ul>
<li>($1, $2, $3 . . .) is an argument supplied to a script at the time of its invocation</li>
<li>position is determined by the shell based on its location with respect to the calling script.</li>
<li>Positional parameters beyond 9 are to be enclosed in curly brackets.</li>
</ul>
</li>
</ul>
<p><img src="/images/image-G1VF6C4I.jpg" alt=""></p>
<ul>
<li>Just like the variable and command substitutions, the shell uses the dollar ($) sign for special and positional parameter expansions as well.</li>
</ul>
<h3 id="script05-using-special-and-positional-parameters">Script05: Using Special and Positional Parameters</h3>
<p>Create <em>com_line_arg.sh</em> to show the supplied arguments, total count, value of the first argument, and PID of the script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># vim /usr/local/bin/com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;There are </span>$#<span style="color:#e6db74"> arguments specified at the command line&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The arguments supplied are: </span>$*<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The first argument is: </span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The Process ID of the script is: </span>$$<span style="color:#e6db74">&#34;</span>                                          
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ae81ff">0</span> arguments specified at the command line
</span></span><span style="display:flex;"><span>The arguments supplied are: 
</span></span><span style="display:flex;"><span>The first argument is: 
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ae81ff">1935</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># com_line_arg.sh the dog jumped over the frog</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ae81ff">6</span> arguments specified at the command line
</span></span><span style="display:flex;"><span>The arguments supplied are: the dog jumped over the frog
</span></span><span style="display:flex;"><span>The first argument is: the
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ae81ff">1936</span>
</span></span></code></pre></div><h3 id="script06-shifting-command-line-arguments">Script06: Shifting Command Line Arguments</h3>
<p><code>shift</code> command</p>
<ul>
<li>Used to move arguments one position to the left.</li>
<li>During this move, the value of the first argument is lost.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># vim /usr/local/bin/com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;There are </span>$#<span style="color:#e6db74"> arguments specified at the command line&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The arguments supplied are: </span>$*<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The first argument is: </span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The Process ID of the script is: </span>$$<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>shift
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The new first argument after the first shift is: </span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>shift
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The new first argument after the second shift is: </span>$1<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ae81ff">0</span> arguments specified at the command line
</span></span><span style="display:flex;"><span>The arguments supplied are: 
</span></span><span style="display:flex;"><span>The first argument is: 
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ae81ff">1941</span>
</span></span><span style="display:flex;"><span>The new first argument after the first shift is: 
</span></span><span style="display:flex;"><span>The new first argument after the second shift is: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># com_line_arg_shift.sh the dog jumped over the frog</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ae81ff">6</span> arguments specified at the command line
</span></span><span style="display:flex;"><span>The arguments supplied are: the dog jumped over the frog
</span></span><span style="display:flex;"><span>The first argument is: the
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ae81ff">1942</span>
</span></span><span style="display:flex;"><span>The new first argument after the first shift is: dog
</span></span><span style="display:flex;"><span>The new first argument after the second shift is: jumped
</span></span></code></pre></div><ul>
<li>Multiple shifts in a single attempt may be performed by furnishing a count of desired shifts to the shift command as an argument. For example, &ldquo;shift 2&rdquo; will carry out two shifts, &ldquo;shift 3&rdquo; will make three shifts, and so on.</li>
</ul>
<h1 id="shell-parameters-1">Shell Parameters</h1>
<ul>
<li>An entity that holds a value such as a name, special character, or number.</li>
<li>The parameter that holds a <strong>name</strong> is referred to as a <strong>variable</strong></li>
<li>a <strong>special character</strong> is referred to as a <strong>special parameter</strong>
<ul>
<li>represents the command or script itself ($0), count of supplied arguments ($* or $@), all arguments ($#), and PID of the process ($$)</li>
</ul>
</li>
<li>one or more digits, except for 0 is referred to as a <strong>positional parameter</strong> (a command line argument).
<ul>
<li>($1, $2, $3 . . .) is an argument supplied to a script at the time of its invocation</li>
<li>position is determined by the shell based on its location with respect to the calling script.</li>
<li>Positional parameters beyond 9 are to be enclosed in curly brackets.</li>
</ul>
</li>
</ul>
<p><img src="/images/image-G1VF6C4I.jpg" alt=""></p>
<ul>
<li>Just like the variable and command substitutions, the shell uses the dollar ($) sign for special and positional parameter expansions as well.</li>
</ul>
<h3 id="script05-using-special-and-positional-parameters-1">Script05: Using Special and Positional Parameters</h3>
<p>Create <em>com_line_arg.sh</em> to show the supplied arguments, total count, value of the first argument, and PID of the script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># vim /usr/local/bin/com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;There are </span>$#<span style="color:#e6db74"> arguments specified at the command line&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The arguments supplied are: </span>$*<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The first argument is: </span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The Process ID of the script is: </span>$$<span style="color:#e6db74">&#34;</span>                                          
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># com_line_arg.sh</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ae81ff">0</span> arguments specified at the command line
</span></span><span style="display:flex;"><span>The arguments supplied are: 
</span></span><span style="display:flex;"><span>The first argument is: 
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ae81ff">1935</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># com_line_arg.sh the dog jumped over the frog</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ae81ff">6</span> arguments specified at the command line
</span></span><span style="display:flex;"><span>The arguments supplied are: the dog jumped over the frog
</span></span><span style="display:flex;"><span>The first argument is: the
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ae81ff">1936</span>
</span></span></code></pre></div><h3 id="script06-shifting-command-line-arguments-1">Script06: Shifting Command Line Arguments</h3>
<p><code>shift</code> command</p>
<ul>
<li>Used to move arguments one position to the left.</li>
<li>During this move, the value of the first argument is lost.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># vim /usr/local/bin/com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;There are </span>$#<span style="color:#e6db74"> arguments specified at the command line&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The arguments supplied are: </span>$*<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The first argument is: </span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The Process ID of the script is: </span>$$<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>shift
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The new first argument after the first shift is: </span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>shift
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;The new first argument after the second shift is: </span>$1<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># com_line_arg_shift.sh</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ae81ff">0</span> arguments specified at the command line
</span></span><span style="display:flex;"><span>The arguments supplied are: 
</span></span><span style="display:flex;"><span>The first argument is: 
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ae81ff">1941</span>
</span></span><span style="display:flex;"><span>The new first argument after the first shift is: 
</span></span><span style="display:flex;"><span>The new first argument after the second shift is: 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server30 ~<span style="color:#f92672">]</span><span style="color:#75715e"># com_line_arg_shift.sh the dog jumped over the frog</span>
</span></span><span style="display:flex;"><span>There are <span style="color:#ae81ff">6</span> arguments specified at the command line
</span></span><span style="display:flex;"><span>The arguments supplied are: the dog jumped over the frog
</span></span><span style="display:flex;"><span>The first argument is: the
</span></span><span style="display:flex;"><span>The Process ID of the script is: <span style="color:#ae81ff">1942</span>
</span></span><span style="display:flex;"><span>The new first argument after the first shift is: dog
</span></span><span style="display:flex;"><span>The new first argument after the second shift is: jumped
</span></span></code></pre></div><ul>
<li>Multiple shifts in a single attempt may be performed by furnishing a count of desired shifts to the shift command as an argument. For example, &ldquo;shift 2&rdquo; will carry out two shifts, &ldquo;shift 3&rdquo; will make three shifts, and so on.</li>
</ul>
<h2 id="shell-scripting-review-questions">Shell Scripting Review Questions</h2>
<p>Q. What are the two types of logical constructs mentioned in this chapter?
A. The if and case constructs.</p>
<hr>
<p>Q. What would != imply in a looping condition?
A. != would check the value for non-equality.</p>
<hr>
<p>Q. What is the function of the <code>shift</code> command?
A. The shift command moves an argument to the left.</p>
<hr>
<p>Q. You can script the startup and shutdown of a database. True or False?
A. True.</p>
<hr>
<p>Q. What is the difference between a line in a script starting with a &ldquo;#&rdquo; and a &ldquo;#!&rdquo;?
A. The former is used to include general comments in the script and the latter combination dictates the full path to the shell file that is to be used to execute the script.</p>
<hr>
<p>Q. What comments may you want to include in a shell script? Write any six.
6. The author name, creation date, last modification date, location, purpose, and usage.</p>
<hr>
<p>Q. What is one benefit of writing shell scripts?
7. One major benefit of writing shell scripts is to automate lengthy and repetitive tasks.</p>
<hr>
<p>Q. What are the three major components in a shell script?
8. The three major components in a shell script are commands, control structures, and comments.</p>
<hr>
<p>Q. Which looping construct can be used to perform an action on listed items?
9. The for loop.</p>
<hr>
<p>Q. What does the <code>echo</code> command do without any arguments?
10. The echo command inserts an empty line in the output when used without arguments.</p>
<hr>
<p>Q. What would the command echo $? do?
11. This command will display the exit code of the last command executed.</p>
<hr>
<p>Q. When would you want to use an exit code in your script?
12. The purpose of using an exit code is to determine exactly where the script quits.</p>
<hr>
<p>Q. What would you modify in a shell script to run it in the debug mode?
13. We would specify -x as an argument to the shell path.</p>
<hr>
<p>Q. What would the command <code>bash -x /usr/local/bin/script1.sh</code> do?
14. This command will execute script1.sh in debug mode.</p>
<h2 id="shell-scripting-diy-labs">Shell Scripting DIY Labs</h2>
<h3 id="lab-write-script-to-create-logical-volumes">Lab: Write Script to Create Logical Volumes</h3>
<ul>
<li>Present 2x1GB virtual disks to server40 in VirtualBox Manager.</li>
<li>As user1 with sudo on server40, write a single bash script to create 2x400MB partitions on each disk using parted and then bring both partitions into LVM control with the <code>pvcreate</code> command.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> vim /usr/local/bin/lvscript.sh
</span></span></code></pre></div><ul>
<li>Create a volume group called <code>vgscript</code> and add both physical volumes to it.</li>
<li>Create three logical volumes each of size 200MB and name them lvscript1, lvscript2, and lvscript3.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> DEVICE in <span style="color:#e6db74">&#34;/dev/sd&#34;</span><span style="color:#f92672">{</span>b..c<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating partition 1 with the size of 400MB on </span>$DEVICE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        parted $DEVICE mklabel msdos
</span></span><span style="display:flex;"><span>        parted $DEVICE mkpart primary <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">401</span>
</span></span><span style="display:flex;"><span>        pvcreate $DEVICE<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating partition 2 with the size of 400MB on </span>$DEVICE<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        parted $DEVICE mkpart primary <span style="color:#ae81ff">402</span> <span style="color:#ae81ff">802</span>
</span></span><span style="display:flex;"><span>        pvcreate $DEVICE<span style="color:#f92672">[</span>2<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>        vgcreate vgscript $DEVICE<span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> $DEVICE<span style="color:#f92672">[</span>2<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> LV in <span style="color:#e6db74">&#34;lvscript&#34;</span><span style="color:#f92672">{</span>1..3<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating logical volume </span>$LV<span style="color:#e6db74"> in volume group vgscript with the size of 200MB&#34;</span>
</span></span><span style="display:flex;"><span>        lvcreate vgscript -L 200MB -n $LV
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><h3 id="lab-write-script-to-create-file-systems">Lab: Write Script to Create File Systems</h3>
<ul>
<li>Write another bash script to create xfs, ext4, and vfat file system structures in the logical volumes, respectively.</li>
<li>Create mount points /mnt/xfs, /mnt/ext4, and /mnt/vfat, and mount the file systems.</li>
<li>Include the df command with -h in the script to list the mounted file systems.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim /usr/local/bin/fsscript.sh
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server40 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/fsscript.sh</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> DEVICE in lvscript<span style="color:#f92672">{</span>1..3<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$DEVICE<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> lvscript1 <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating xfs filesystem on logical volume lvscript1&#34;</span>
</span></span><span style="display:flex;"><span>        echo
</span></span><span style="display:flex;"><span>        mkfs.xfs /dev/vgscript/lvscript1
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating /mnt/xfs&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/xfs
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript1 /mnt/xfs
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$DEVICE<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> lvscript2 <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">then</span>    
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating ext4 filesystem on logical volume lvscript2&#34;</span>
</span></span><span style="display:flex;"><span>        echo
</span></span><span style="display:flex;"><span>        mkfs.ext4 /dev/vgscript/lvscript2
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating /mnt/ext4&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/ext4
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript2 /mnt/ext4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">elif</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span>$DEVICE<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">=</span> lvscript3 <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">then</span>    
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating vfat filesystem on logical volume lvscript3&#34;</span>
</span></span><span style="display:flex;"><span>        echo
</span></span><span style="display:flex;"><span>        mkfs.vfat /dev/vgscript/lvscript3
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Creating /mnt/vfat&#34;</span>
</span></span><span style="display:flex;"><span>        mkdir /mnt/vfat
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Mounting filesystem&#34;</span>
</span></span><span style="display:flex;"><span>        mount /dev/vgscript/lvscript3 /mnt/vfat
</span></span><span style="display:flex;"><span>        echo
</span></span><span style="display:flex;"><span>        echo
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Done!&#34;</span>
</span></span><span style="display:flex;"><span>                df -h
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        echo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server40 ~<span style="color:#f92672">]</span><span style="color:#75715e"># fsscript.sh</span>
</span></span><span style="display:flex;"><span>Creating xfs filesystem on logical volume lvscript1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Filesystem should be larger than 300MB.
</span></span><span style="display:flex;"><span>Log size should be at least 64MB.
</span></span><span style="display:flex;"><span>Support <span style="color:#66d9ef">for</span> filesystems like this one is deprecated and they will not be supported in future releases.
</span></span><span style="display:flex;"><span>meta-data<span style="color:#f92672">=</span>/dev/vgscript/lvscript1 isize<span style="color:#f92672">=</span><span style="color:#ae81ff">512</span>    agcount<span style="color:#f92672">=</span>4, agsize<span style="color:#f92672">=</span><span style="color:#ae81ff">12800</span> blks
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">=</span>                       sectsz<span style="color:#f92672">=</span><span style="color:#ae81ff">512</span>   attr<span style="color:#f92672">=</span>2, projid32bit<span style="color:#f92672">=</span>1
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">=</span>                       crc<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>        finobt<span style="color:#f92672">=</span>1, sparse<span style="color:#f92672">=</span>1, rmapbt<span style="color:#f92672">=</span>0
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">=</span>                       reflink<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>    bigtime<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> inobtcount<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> nrext64<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>data     <span style="color:#f92672">=</span>                       bsize<span style="color:#f92672">=</span><span style="color:#ae81ff">4096</span>   blocks<span style="color:#f92672">=</span>51200, imaxpct<span style="color:#f92672">=</span>25
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">=</span>                       sunit<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>      swidth<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> blks
</span></span><span style="display:flex;"><span>naming   <span style="color:#f92672">=</span>version <span style="color:#ae81ff">2</span>              bsize<span style="color:#f92672">=</span><span style="color:#ae81ff">4096</span>   ascii-ci<span style="color:#f92672">=</span>0, ftype<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>log      <span style="color:#f92672">=</span>internal log           bsize<span style="color:#f92672">=</span><span style="color:#ae81ff">4096</span>   blocks<span style="color:#f92672">=</span>1368, version<span style="color:#f92672">=</span>2
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">=</span>                       sectsz<span style="color:#f92672">=</span><span style="color:#ae81ff">512</span>   sunit<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> blks, lazy-count<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>realtime <span style="color:#f92672">=</span>none                   extsz<span style="color:#f92672">=</span><span style="color:#ae81ff">4096</span>   blocks<span style="color:#f92672">=</span>0, rtextents<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Creating /mnt/xfs
</span></span><span style="display:flex;"><span>Mounting filesystem
</span></span><span style="display:flex;"><span>Creating ext4 filesystem on logical volume lvscript2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mke2fs 1.46.5 <span style="color:#f92672">(</span>30-Dec-2021<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Creating filesystem with <span style="color:#ae81ff">204800</span> 1k blocks and <span style="color:#ae81ff">51200</span> inodes
</span></span><span style="display:flex;"><span>Filesystem UUID: b16383bf-7b65-4a00-bb6d-c297733f60b3
</span></span><span style="display:flex;"><span>Superblock backups stored on blocks: 
</span></span><span style="display:flex;"><span>	8193, 24577, 40961, 57345, <span style="color:#ae81ff">73729</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Allocating group tables: <span style="color:#66d9ef">done</span>                            
</span></span><span style="display:flex;"><span>Writing inode tables: <span style="color:#66d9ef">done</span>                            
</span></span><span style="display:flex;"><span>Creating journal <span style="color:#f92672">(</span><span style="color:#ae81ff">4096</span> blocks<span style="color:#f92672">)</span>: <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>Writing superblocks and filesystem accounting information: <span style="color:#66d9ef">done</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Creating /mnt/ext4
</span></span><span style="display:flex;"><span>Mounting filesystem
</span></span><span style="display:flex;"><span>Creating vfat filesystem on logical volume lvscript3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mkfs.fat 4.2 <span style="color:#f92672">(</span>2021-01-31<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Creating /mnt/vfat
</span></span><span style="display:flex;"><span>Mounting filesystem
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Done!
</span></span></code></pre></div><h3 id="lab-21-3-write-script-to-configure-new-network-connection-profile">Lab 21-3: Write Script to Configure New Network Connection Profile</h3>
<ul>
<li>Present a new network interface to server40 in VirtualBox Manager.</li>
<li>As user1 with sudo on server40, write a single bash script to run the nmcli command to configure custom IP assignments (choose your own settings) on the new network device.</li>
<li>Make a copy of the /etc/hosts file as part of this script.</li>
<li>Choose a hostname of your choice and add a mapping to the /etc/hosts file without overwriting existing file content.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server40 ~<span style="color:#f92672">]</span><span style="color:#75715e"># vim /usr/local/bin/network.sh</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>cp /etc/hosts /etc/hosts.bak <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>nmcli c a type Ethernet con-name enp0s9 ifname enp0s9 ip4 10.32.32.2/24 gw4 10.32.32.1
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;10.32.33.14 frog.example.com frog&#34;</span> &gt;&gt; /etc/hosts
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server40 ~<span style="color:#f92672">]</span><span style="color:#75715e"># chmod +x /usr/local/bin/network.sh</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server40 ~<span style="color:#f92672">]</span><span style="color:#75715e"># network.sh</span>
</span></span><span style="display:flex;"><span>Connection <span style="color:#e6db74">&#39;enp0s9&#39;</span> <span style="color:#f92672">(</span>5a342243-e77b-452e-88e2-8838d3ecea6d<span style="color:#f92672">)</span> successfully added.
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server40 ~<span style="color:#f92672">]</span><span style="color:#75715e"># cat /etc/hosts</span>
</span></span><span style="display:flex;"><span>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
</span></span><span style="display:flex;"><span>::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
</span></span><span style="display:flex;"><span>10.32.33.14 frog.example.com frog
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server40 ~<span style="color:#f92672">]</span><span style="color:#75715e"># ip a</span>
</span></span><span style="display:flex;"><span>enp0s9: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style="color:#ae81ff">1500</span> qdisc fq_codel state UP group default qlen <span style="color:#ae81ff">1000</span>
</span></span><span style="display:flex;"><span>    link/ether 08:00:27:1d:f4:c1 brd ff:ff:ff:ff:ff:ff
</span></span><span style="display:flex;"><span>    inet 10.32.32.2/24 brd 10.32.32.255 scope global noprefixroute enp0s9
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span><span style="display:flex;"><span>    inet6 fe80::2c5d:31cc:1d79:6b43/64 scope link noprefixroute 
</span></span><span style="display:flex;"><span>       valid_lft forever preferred_lft forever
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>root@server40 ~<span style="color:#f92672">]</span><span style="color:#75715e"># nmcli d s</span>
</span></span><span style="display:flex;"><span>DEVICE  TYPE      STATE                   CONNECTION 
</span></span><span style="display:flex;"><span>enp0s3  ethernet  connected               enp0s3     
</span></span><span style="display:flex;"><span>enp0s8  ethernet  connected               enp0s8     
</span></span><span style="display:flex;"><span>enp0s9  ethernet  connected               enp0s9     
</span></span><span style="display:flex;"><span>lo      loopback  connected <span style="color:#f92672">(</span>externally<span style="color:#f92672">)</span>  lo  
</span></span></code></pre></div>
            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
</div>
    <small class="footer_copyright">
        © 2024 .
        
    </small>
</footer>







    
    <script src="https://example.org/js/main.min.4ee188e1744c19816e95a540b2650ed9f033ea0371e74eac8e717355cfca8741.js" integrity="sha256-TuGI4XRMGYFulaVAsmUO2fAz6gNx506sjnFzVc/Kh0E="></script>

    

</body>
</html>
