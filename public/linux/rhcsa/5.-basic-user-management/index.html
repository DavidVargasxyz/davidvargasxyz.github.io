<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="content-type" content="text/html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title itemprop="name"> | David Vargas</title>
<meta property="og:title" content=" | David Vargas" />
<meta name="twitter:title" content=" | David Vargas" />
<meta itemprop="name" content=" | David Vargas" />
<meta name="application-name" content=" | David Vargas" />
<meta property="og:site_name" content="davidvargas.xyz" />

<meta name="description" content="David Vargas&#39;s blog">
<meta itemprop="description" content="David Vargas&#39;s blog" />
<meta property="og:description" content="David Vargas&#39;s blog" />
<meta name="twitter:description" content="David Vargas&#39;s blog" />

<meta property="og:locale" content="en-us" />
<meta name="language" content="en-us" />

  <link rel="alternate" hreflang="en-gb" href="http://localhost:1313/linux/rhcsa/5.-basic-user-management/" title="" />






<meta name="generator" content="Hugo 0.134.3">

    
    <meta property="og:url" content="http://localhost:1313/linux/rhcsa/5.-basic-user-management/">
  <meta property="og:site_name" content="David Vargas">
  <meta property="og:title" content="David Vargas">
  <meta property="og:description" content="Listing Logged-In Users A list of the users who have successfully signed on to the system with valid credentials can be printed using who and w
who command references the /run/utmp file and displays the information. displays login name of user shows terminal session device filename pts stands for pseudo terminal session shows data and time of user login Shows if terminal session is graphical(:0), remote(IP address), or textual on the console what command (w) Shows length of time the user has been idle CPU time used by all processes including any existing background jobs attached to this terminal (JCPU), CPU time used by the current process (PCPU), current activity (WHAT). current system time system up duration number of users logged in cpu averages over last 1, 5, and 15 minutes load average (CPU load): 0.00 and 1.00 correspond to no load and full load, and a number greater than 1.00 signifies excess load (over 100%). last command Reports the history of successful user login attempts and system Consults the wtmp file located in the /var/log directory. wtmp keeps a record of login/logout activities login time duration a user stayed logged in tty Output Login name Terminal name Terminal name or IP from where connection was established Day, Month, date, and time when the connection was established Log out time or (still logged in) Duration of session Action name (system reboots section) Activity name (system reboots section) Linux kernel version (system reboots section) Day, Month, date, and time when the reboot command was issued (system reboots section) System restart time (system reboots section) Duration the system remained down or (still running) (system reboots section) log filename (wtmp) (last line) lastb command reports failed login attempts Consults /var/log/btmp record of failed login attempts login name time tty Must be root to run this command Columns name of user protocol used terminal name or ip address Day, Month, Date, and time of the attempt Duration the attempt was tried Duration the attempt last for log filename (btmp) (last line) lastlog command most recent login evidence info for every user account that exists on the system Consults /var/log/lastlog record of most recent user attempts login name time port (or tty) Columns: Login name of user Terminal name assigned upon Logging in Terminal name or Ip address from where the session was initiated Timestamp for the latest login or “Never logged in” service accounts are used by their respective services, and they are not meant for logging. id (identifier) Command displays the calling user’s: UID (User IDentifier) username GID (Group IDentifier) group name all secondary groups the user is a member of SELinux security context groups Command: lists all groups the calling user is a member of: first group listed is the primary group for the user who executed this command other groups are secondary (or supplementary). can also view group membership information for a different user. Local User Authentication Files Three supported account types: root, normal, service root has full access to all services and administrative functions on the system. created by default during installation. Normal user-level privileges cannot perform any administrative functions can run applications and programs that have been authorized. Service take care of their respective services, which include apache, ftp, mail, and chrony. User account information for local users is stored in four files that are located in the /etc directory. passwd, shadow, group, and gshadow (user authentication files) updated when a user or group account is created, modified, or deleted. referenced to check and validate the credentials for a user at the time of their login attempt, system creates their automatic backups by default as passwd-, shadow-, group-, and gshadow- in the /etc directory. /etc/passwd vital user login data each row hold info for one user 644 permissions by default 7 feilds per row login name up to 255 characters _ and - characters are supported not recommended to include special characters and uppercase letters in login names. password “x” in this field points to /etc/shadow for actual password. “*” identifies disabled account Can also include a hashed password (RHEL uses SHA-512 by default) UID Number between 0 and 4.2 billion UID 0 is reserved for root account UIDs 1-200 are used by Red Hat for core service accounts UIDs 201-999 are reserved for non-core service accounts UIDs 1000 &lt; are for normal user accounts (starts at 1000 by default) GID GID that matches entry in /etc/group (primary group) Group for every user by default that matches UID Comments (GECOS) or (GCOS) general comments about the user Home Directory absolute path to the user home directory. Shell absolute path of the shell file for the user’s primary shell after logging in. (default = (/bin/bash)) /etc/shadow no access permissions for any user (even root) (but owned by root) secure password control (shadow password) user passwords are hashed and stored in a more secure file /etc/shadow, limits on user passwords in terms of expiration, warning period, etc. applied on per-user basis limits and other settings are defined in /etc/login.defs user is initially checked in the passwd file for existence and then in the shadow file for authenticity. contains user authentication and password aging information. Each row in the file corresponds to one entry in the passwd file. login names are used as a common key between the shadow and passwd files. nine colon-separated fields per line entry. 1 Login name 2 Encrypted password ! at the beginning of this field shows that the user account is locked if field is empty then user has passwordless entry 3 last change Number of days (lastchg) since the UNIX epoch, (UNIX time (January 01, 1970 00:00:00 UTC) when the password was last modified. Empty field represents the passiveness of password aging features. 0 forces the user to change their password upon next login. 4 minimum number of days (mindays) that must elapse before the user is allowed to change their password can be altered using the chage command with the -m option or the passwd command with the -n option. 0 or null in this field disables this feature. 5 (Maximum) maximum number of days (maxdays) before the user password expires and must be changed. may be altered using the chage command with the -M option or the passwd command with the -x option. null value here disables this feature along with other features such as the maximum password age, warning alerts, and the user inactivity period. 6 Field 6 (Warning) number of days (warndays) the user gets warnings for changing their password before it expires. may be altered using the chage command with the -W option or the passwd command with the -w option. 0 or null in this field disables this feature. 7 Password Expiry) maximum allowable number of days for the user to be able to log in with the expired password. (inactivity period). may be altered using the chage command with the -I option or the passwd command with the -i option. empty field disables this feature. 8 (Account Expiry) number of days since the UNIX time when the user account will expire and no longer be available. may be altered using the chage command with the -E option. empty field disables this feature. 9 (Reserved): Reserved for future use. /etc/group plaintext file and contains critical group information. 644 permissions by default and owned by root. Each row in the file stores information for one group entry. Every user on the system must be a member of at least one group (User Private Group (UPG)). a group name matches the username it is associated with by default four colon-separated fields per line entry. Field 1 (Group Name): Holds a group name that must begin with a letter. Group names with up to 255 characters, including the uppercase, underscore (_) and hyphen (-) characters, are also supported. (not recommended) Field 2 (Encrypted Password): Can be empty or contain an “x” (points to the /etc/gshadow file for the actual password), or a hashed group-level password. can set a password on a group for non-members to be able to change their group identity temporarily using the newgrp command. non-members must enter the correct password in order to do so. Field 3 (GID): Holds a GID, that is also placed in the GID field of the passwd file. By default, groups are created with GIDs starting at 1000 and with the same name as the username. system allows several users to belong to a single group also allows a single user to be a member of multiple groups at the same time. Field 4 (Group Members): Lists the membership for the group. (user’s primary group is always defined in the GID field of the passwd file.) /etc/gshadow no access permissions for any user (even root) group passwords are hashed and stored group names are used as a common key between the gshadow and group files. 000 permissions and owned by root four colon-separated fields Field 1 (Group Name): Consists of a group name as appeared in the group file. Field 2 (Encrypted Password): Can contain a hashed password, which may be set with the gpasswd command for non-group members to access the group temporarily using the newgrp command. single exclamation mark (!) or a null value in this field allows group members password-less access and restricts non-members from switching into this group. Field 3 (Group Administrators): Lists usernames of group administrators that are authorized to add or remove members with the gpasswd command. Field 4 (Members): comma-separated list of members. gpasswd command: - add group administrators. - add or delete group members. - assign or revoke a group-level password. - disable the ability of the newgrp command to access a group. - picks up the default values from the /etc/login.defs file. useradd and login.defs configuration files useradd command picks up the default values from the /etc/default/useradd and /etc/login.defs files for any options that are not specified at the command line when executing it. login.defs file is also consulted by the usermod, userdel, chage, and passwd commands Both files store several defaults including those that affect the password length and password lifecycle. /etc/default/useradd Default Directives: starting GID (GROUP) (provided the USERGROUPS_ENAB directive in the login.defs file is set to no) home directory location (HOME), number of inactivity days between password expiry and permanent account disablement (INACTIVE), account expiry date (EXPIRE), login shell (SHELL), skeleton directory location to copy user initialization files from (SKEL) whether to create mail spool directory (CREATE_MAIL_SPOOL) /etc/login.defs default directives: MAIL_DIR">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="linux">


    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="David Vargas">
  <meta name="twitter:description" content="Listing Logged-In Users A list of the users who have successfully signed on to the system with valid credentials can be printed using who and w
who command references the /run/utmp file and displays the information. displays login name of user shows terminal session device filename pts stands for pseudo terminal session shows data and time of user login Shows if terminal session is graphical(:0), remote(IP address), or textual on the console what command (w) Shows length of time the user has been idle CPU time used by all processes including any existing background jobs attached to this terminal (JCPU), CPU time used by the current process (PCPU), current activity (WHAT). current system time system up duration number of users logged in cpu averages over last 1, 5, and 15 minutes load average (CPU load): 0.00 and 1.00 correspond to no load and full load, and a number greater than 1.00 signifies excess load (over 100%). last command Reports the history of successful user login attempts and system Consults the wtmp file located in the /var/log directory. wtmp keeps a record of login/logout activities login time duration a user stayed logged in tty Output Login name Terminal name Terminal name or IP from where connection was established Day, Month, date, and time when the connection was established Log out time or (still logged in) Duration of session Action name (system reboots section) Activity name (system reboots section) Linux kernel version (system reboots section) Day, Month, date, and time when the reboot command was issued (system reboots section) System restart time (system reboots section) Duration the system remained down or (still running) (system reboots section) log filename (wtmp) (last line) lastb command reports failed login attempts Consults /var/log/btmp record of failed login attempts login name time tty Must be root to run this command Columns name of user protocol used terminal name or ip address Day, Month, Date, and time of the attempt Duration the attempt was tried Duration the attempt last for log filename (btmp) (last line) lastlog command most recent login evidence info for every user account that exists on the system Consults /var/log/lastlog record of most recent user attempts login name time port (or tty) Columns: Login name of user Terminal name assigned upon Logging in Terminal name or Ip address from where the session was initiated Timestamp for the latest login or “Never logged in” service accounts are used by their respective services, and they are not meant for logging. id (identifier) Command displays the calling user’s: UID (User IDentifier) username GID (Group IDentifier) group name all secondary groups the user is a member of SELinux security context groups Command: lists all groups the calling user is a member of: first group listed is the primary group for the user who executed this command other groups are secondary (or supplementary). can also view group membership information for a different user. Local User Authentication Files Three supported account types: root, normal, service root has full access to all services and administrative functions on the system. created by default during installation. Normal user-level privileges cannot perform any administrative functions can run applications and programs that have been authorized. Service take care of their respective services, which include apache, ftp, mail, and chrony. User account information for local users is stored in four files that are located in the /etc directory. passwd, shadow, group, and gshadow (user authentication files) updated when a user or group account is created, modified, or deleted. referenced to check and validate the credentials for a user at the time of their login attempt, system creates their automatic backups by default as passwd-, shadow-, group-, and gshadow- in the /etc directory. /etc/passwd vital user login data each row hold info for one user 644 permissions by default 7 feilds per row login name up to 255 characters _ and - characters are supported not recommended to include special characters and uppercase letters in login names. password “x” in this field points to /etc/shadow for actual password. “*” identifies disabled account Can also include a hashed password (RHEL uses SHA-512 by default) UID Number between 0 and 4.2 billion UID 0 is reserved for root account UIDs 1-200 are used by Red Hat for core service accounts UIDs 201-999 are reserved for non-core service accounts UIDs 1000 &lt; are for normal user accounts (starts at 1000 by default) GID GID that matches entry in /etc/group (primary group) Group for every user by default that matches UID Comments (GECOS) or (GCOS) general comments about the user Home Directory absolute path to the user home directory. Shell absolute path of the shell file for the user’s primary shell after logging in. (default = (/bin/bash)) /etc/shadow no access permissions for any user (even root) (but owned by root) secure password control (shadow password) user passwords are hashed and stored in a more secure file /etc/shadow, limits on user passwords in terms of expiration, warning period, etc. applied on per-user basis limits and other settings are defined in /etc/login.defs user is initially checked in the passwd file for existence and then in the shadow file for authenticity. contains user authentication and password aging information. Each row in the file corresponds to one entry in the passwd file. login names are used as a common key between the shadow and passwd files. nine colon-separated fields per line entry. 1 Login name 2 Encrypted password ! at the beginning of this field shows that the user account is locked if field is empty then user has passwordless entry 3 last change Number of days (lastchg) since the UNIX epoch, (UNIX time (January 01, 1970 00:00:00 UTC) when the password was last modified. Empty field represents the passiveness of password aging features. 0 forces the user to change their password upon next login. 4 minimum number of days (mindays) that must elapse before the user is allowed to change their password can be altered using the chage command with the -m option or the passwd command with the -n option. 0 or null in this field disables this feature. 5 (Maximum) maximum number of days (maxdays) before the user password expires and must be changed. may be altered using the chage command with the -M option or the passwd command with the -x option. null value here disables this feature along with other features such as the maximum password age, warning alerts, and the user inactivity period. 6 Field 6 (Warning) number of days (warndays) the user gets warnings for changing their password before it expires. may be altered using the chage command with the -W option or the passwd command with the -w option. 0 or null in this field disables this feature. 7 Password Expiry) maximum allowable number of days for the user to be able to log in with the expired password. (inactivity period). may be altered using the chage command with the -I option or the passwd command with the -i option. empty field disables this feature. 8 (Account Expiry) number of days since the UNIX time when the user account will expire and no longer be available. may be altered using the chage command with the -E option. empty field disables this feature. 9 (Reserved): Reserved for future use. /etc/group plaintext file and contains critical group information. 644 permissions by default and owned by root. Each row in the file stores information for one group entry. Every user on the system must be a member of at least one group (User Private Group (UPG)). a group name matches the username it is associated with by default four colon-separated fields per line entry. Field 1 (Group Name): Holds a group name that must begin with a letter. Group names with up to 255 characters, including the uppercase, underscore (_) and hyphen (-) characters, are also supported. (not recommended) Field 2 (Encrypted Password): Can be empty or contain an “x” (points to the /etc/gshadow file for the actual password), or a hashed group-level password. can set a password on a group for non-members to be able to change their group identity temporarily using the newgrp command. non-members must enter the correct password in order to do so. Field 3 (GID): Holds a GID, that is also placed in the GID field of the passwd file. By default, groups are created with GIDs starting at 1000 and with the same name as the username. system allows several users to belong to a single group also allows a single user to be a member of multiple groups at the same time. Field 4 (Group Members): Lists the membership for the group. (user’s primary group is always defined in the GID field of the passwd file.) /etc/gshadow no access permissions for any user (even root) group passwords are hashed and stored group names are used as a common key between the gshadow and group files. 000 permissions and owned by root four colon-separated fields Field 1 (Group Name): Consists of a group name as appeared in the group file. Field 2 (Encrypted Password): Can contain a hashed password, which may be set with the gpasswd command for non-group members to access the group temporarily using the newgrp command. single exclamation mark (!) or a null value in this field allows group members password-less access and restricts non-members from switching into this group. Field 3 (Group Administrators): Lists usernames of group administrators that are authorized to add or remove members with the gpasswd command. Field 4 (Members): comma-separated list of members. gpasswd command: - add group administrators. - add or delete group members. - assign or revoke a group-level password. - disable the ability of the newgrp command to access a group. - picks up the default values from the /etc/login.defs file. useradd and login.defs configuration files useradd command picks up the default values from the /etc/default/useradd and /etc/login.defs files for any options that are not specified at the command line when executing it. login.defs file is also consulted by the usermod, userdel, chage, and passwd commands Both files store several defaults including those that affect the password length and password lifecycle. /etc/default/useradd Default Directives: starting GID (GROUP) (provided the USERGROUPS_ENAB directive in the login.defs file is set to no) home directory location (HOME), number of inactivity days between password expiry and permanent account disablement (INACTIVE), account expiry date (EXPIRE), login shell (SHELL), skeleton directory location to copy user initialization files from (SKEL) whether to create mail spool directory (CREATE_MAIL_SPOOL) /etc/login.defs default directives: MAIL_DIR">


    

    <link rel="canonical" href="http://localhost:1313/linux/rhcsa/5.-basic-user-management/">
    <link href="/style.min.1915b95fdbf4046da0032dde0fb966271ed904fa9c019f9a326d7ce001902895.css" rel="stylesheet">
    <link href="/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css" rel="stylesheet">

    
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg">
    <link rel="shortcut icon" href="/favicon.ico">




<link rel="manifest" href="http://localhost:1313/site.webmanifest">

<meta name="msapplication-config" content="/browserconfig.xml">
<meta name="msapplication-TileColor" content="#2d89ef">
<meta name="theme-color" content="#434648">

    
    <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

    </head>
<body data-theme = "dark" class="notransition">

<script src="/js/theme.js"></script>

<div class="navbar" role="navigation">
    <nav class="menu" aria-label="Main Navigation">
        <a href="http://localhost:1313/" class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" 
viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" 
stroke-linejoin="round" class="feather feather-home">
<title>Home</title>
<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
<polyline points="9 22 9 12 15 12 15 22"></polyline>
</svg>
        </a>
        <input type="checkbox" id="menu-trigger" class="menu-trigger" />
        <label for="menu-trigger">
            <span class="menu-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentColor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7L3.40726 7"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488L3.49301 3.51488"></path><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"></path><path stroke-linecap="round" stroke-linejoin="round" d="M0.5 12.5V1.5C0.5 0.947715 0.947715 0.5 1.5 0.5H12.5C13.0523 0.5 13.5 0.947715 13.5 1.5V12.5C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C0.947715 13.5 0.5 13.0523 0.5 12.5Z"></path></svg>
            </span>
        </label>

        <div class="trigger">
            <ul class="trigger-container">
                
                
                <li>
                    <a class="menu-link " href="/">
                        home
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/posts/">
                        posts
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/notes/">
                        notes
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/readings/">
                        readings
                    </a>
                    
                </li>
                
                <li>
                    <a class="menu-link " href="/about">
                        about
                    </a>
                    
                </li>
                
                <li class="menu-separator">
                    <span>|</span>
                </li>
                
                
            </ul>
            <a id="mode" href="#">
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
                <svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1">
<title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></circle><line x1="7" y1="0.5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="0.5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"></line><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"></line></g></svg>
            </a>
        </div>
    </nav>
</div>

<div class="wrapper post">
    <main class="page-content" aria-label="Content">
        <article>
            <header class="header">
                <h1 class="header-title"></h1>
                
            </header>
            
            <div class="page-content">
                <h2 id="listing-logged-in-users">Listing Logged-In Users</h2>
<p>A list of the users who have successfully signed on to the system with valid credentials can be printed using <code>who</code> and <code>w</code></p>
<h3 id="who-command">who command</h3>
<ul>
<li>references the /run/utmp file and displays the information.</li>
<li>displays login name of user</li>
<li>shows terminal session device filename</li>
<li>pts stands for pseudo terminal session</li>
<li>shows data and time of user login</li>
<li>Shows if terminal session is graphical(:0), remote(IP address), or textual on the console</li>
</ul>
<h3 id="what-command-w">what command (w)</h3>
<ul>
<li>Shows length of time the user has been idle</li>
<li>CPU time used by all processes including any existing background jobs attached to this terminal (JCPU),</li>
<li>CPU time used by the current process (PCPU),</li>
<li>current activity (WHAT).</li>
<li>current system time</li>
<li>system up duration</li>
<li>number of users logged in</li>
<li>cpu averages over last 1, 5, and 15 minutes</li>
<li>load average (CPU load): 0.00 and 1.00 correspond to no load and full load, and a number greater than 1.00 signifies excess load (over 100%).</li>
</ul>
<h3 id="last-command">last command</h3>
<ul>
<li>Reports the history of successful user login attempts and system</li>
<li>Consults the wtmp file located in the /var/log directory.</li>
<li>wtmp keeps a record of login/logout activities
<ul>
<li>login time</li>
<li>duration a user stayed logged in</li>
<li>tty</li>
</ul>
</li>
<li>Output
<ul>
<li>Login name</li>
<li>Terminal name</li>
<li>Terminal name or IP from where connection was established</li>
<li>Day, Month, date, and time when the connection was established</li>
<li>Log out time or (still logged in)</li>
<li>Duration of session</li>
<li>Action name (system reboots section)</li>
<li>Activity name (system reboots section)</li>
<li>Linux kernel version (system reboots section)</li>
<li>Day, Month, date, and time when the reboot command was issued (system reboots section)</li>
<li>System restart time (system reboots section)</li>
<li>Duration the system remained down or (still running) (system reboots section)</li>
<li>log filename (wtmp) (last line)</li>
</ul>
</li>
</ul>
<h3 id="lastb-command">lastb command</h3>
<ul>
<li>reports failed login attempts</li>
<li>Consults /var/log/btmp
<ul>
<li>record of failed login attempts</li>
<li>login name</li>
<li>time</li>
<li>tty</li>
</ul>
</li>
<li>Must be root to run this command</li>
<li>Columns
<ul>
<li>name of user</li>
<li>protocol used</li>
<li>terminal name or ip address</li>
<li>Day, Month, Date, and time of the attempt</li>
<li>Duration the attempt was tried</li>
<li>Duration the attempt last for</li>
<li>log filename (btmp) (last line)</li>
</ul>
</li>
</ul>
<h3 id="lastlog-command">lastlog command</h3>
<ul>
<li>most recent login evidence info for every user account that exists on the system</li>
<li>Consults /var/log/lastlog
<ul>
<li>record of most recent user attempts</li>
<li>login name</li>
<li>time</li>
<li>port (or tty)</li>
<li>Columns:
<ul>
<li>Login name of user</li>
<li>Terminal name assigned upon Logging in</li>
<li>Terminal name or Ip address from where the session was initiated</li>
<li>Timestamp for the latest login or &ldquo;Never logged in&rdquo;</li>
</ul>
</li>
<li>service accounts are used by their respective services, and they are not meant for logging.</li>
</ul>
</li>
</ul>
<h3 id="id-identifier-command">id (identifier) Command</h3>
<ul>
<li>displays the calling user’s:
<ul>
<li>UID (User IDentifier)</li>
<li>username</li>
<li>GID (Group IDentifier)</li>
<li>group name</li>
<li>all secondary groups the user is a member of</li>
<li>SELinux security context</li>
</ul>
</li>
</ul>
<h3 id="groups-command">groups Command:</h3>
<ul>
<li>lists all groups the calling user is a member of:</li>
<li>first group listed is the primary group for the user who executed this command</li>
<li>other groups are secondary (or supplementary).</li>
<li>can also view group membership information for a different user.</li>
</ul>
<h2 id="local-user-authentication-files">Local User Authentication Files</h2>
<ul>
<li>Three supported account types: root, normal, service</li>
<li>root
<ul>
<li>has full access to all services and administrative functions on the system.</li>
<li>created by default during installation.</li>
</ul>
</li>
<li>Normal
<ul>
<li>user-level privileges</li>
<li>cannot perform any administrative functions</li>
<li>can run applications and programs that have been authorized.</li>
</ul>
</li>
<li>Service
<ul>
<li>take care of their respective services, which include apache, ftp, mail, and chrony.</li>
</ul>
</li>
<li>User account information for local users is stored in four files that are located in the /etc directory.
<ul>
<li>passwd, shadow, group, and gshadow (user authentication files)</li>
<li>updated when a user or group account is created, modified, or deleted.</li>
<li>referenced to check and validate the credentials for a user at the time of their login attempt,</li>
<li>system creates their automatic backups by default as passwd-, shadow-, group-, and gshadow- in the /etc directory.</li>
</ul>
</li>
</ul>
<h3 id="etcpasswd">/etc/passwd</h3>
<ul>
<li>vital user login data</li>
<li>each row hold info for one user</li>
<li>644 permissions by default</li>
<li>7 feilds per row
<ul>
<li>login name
<ul>
<li>up to 255 characters</li>
<li>_ and - characters are supported</li>
<li>not recommended to include special characters and uppercase letters in login names.</li>
</ul>
</li>
<li>password
<ul>
<li>&ldquo;x&rdquo; in this field points to /etc/shadow for actual password.</li>
<li>&ldquo;*&rdquo; identifies disabled account</li>
<li>Can also include a hashed password (RHEL uses SHA-512 by default)</li>
</ul>
</li>
<li>UID
<ul>
<li>Number between 0 and 4.2 billion</li>
<li>UID 0 is reserved for root account</li>
<li>UIDs 1-200 are used by Red Hat for core service accounts</li>
<li>UIDs 201-999 are reserved for non-core service accounts</li>
<li>UIDs 1000 &lt; are for normal user accounts (starts at 1000 by default)</li>
</ul>
</li>
<li>GID
<ul>
<li>GID that matches entry in /etc/group (primary group)</li>
<li>Group for every user by default that matches UID</li>
</ul>
</li>
<li>Comments (GECOS) or (GCOS)
<ul>
<li>general comments about the user</li>
</ul>
</li>
<li>Home Directory
<ul>
<li>absolute path to the user home directory.</li>
</ul>
</li>
<li>Shell
<ul>
<li>absolute path of the shell file for the user&rsquo;s primary shell after logging in. (default = (/bin/bash))</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="etcshadow">/etc/shadow</h3>
<ul>
<li>no access permissions for any user (even root) (but owned by root)</li>
<li>secure password control (shadow password)</li>
<li>user passwords are hashed and stored in a more secure file /etc/shadow,</li>
<li>limits on user passwords in terms of expiration, warning period, etc. applied on per-user basis</li>
<li>limits and other settings are defined in /etc/login.defs</li>
<li>user is initially checked in the passwd file for existence and then in the shadow file for authenticity.</li>
<li>contains user authentication and password aging information.</li>
<li>Each row in the file corresponds to one entry in the passwd file.</li>
<li>login names are used as a common key between the shadow and passwd files.</li>
<li>nine colon-separated fields per line entry.
<ul>
<li>1 Login name</li>
<li>2 Encrypted password
<ul>
<li>! at the beginning of this field shows that the user account is locked</li>
<li>if field is empty then user has passwordless entry</li>
</ul>
</li>
<li>3 last change
<ul>
<li>Number of days (lastchg) since the UNIX epoch, (UNIX time (January 01, 1970 00:00:00 UTC) when the password was last modified.</li>
<li>Empty field represents the passiveness of password aging features.</li>
<li>0 forces the user to change their password upon next login.</li>
</ul>
</li>
<li>4 minimum
<ul>
<li>number of days (mindays) that must elapse before the user is allowed to change their password</li>
<li>can be altered using the <code>chage</code> command with the <code>-m</code> option or the <code>passwd</code> command with the <code>-n</code> option.</li>
<li>0 or null in this field disables this feature.</li>
</ul>
</li>
<li>5 (Maximum)
<ul>
<li>maximum number of days (maxdays) before the user password expires and must be changed.</li>
<li>may be altered using the <code>chage</code> command with the <code>-M </code>option or the <code>passwd</code> command with the <code>-x</code> option.</li>
<li>null value here disables this feature along with other features such as the maximum password age, warning alerts, and the user inactivity period.</li>
</ul>
</li>
<li>6 Field 6 (Warning)
<ul>
<li>number of days (warndays) the user gets warnings for changing their password before it expires.</li>
<li>may be altered using the <code>chage</code> command with the <code>-W</code> option or the <code>passwd</code> command with the <code>-w</code> option.</li>
<li>0 or null in this field disables this feature.</li>
</ul>
</li>
<li>7 Password Expiry)
<ul>
<li>maximum allowable number of days for the user to be able to log in with the expired password. (inactivity period).</li>
<li>may be altered using the <code>chage</code> command with the <code>-I</code> option or the <code>passwd</code> command with the <code>-i</code> option.</li>
<li>empty field disables this feature.</li>
</ul>
</li>
<li>8 (Account Expiry)
<ul>
<li>number of days since the UNIX time when the user account will expire and no longer be available.</li>
<li>may be altered using the chage command with the <code>-E</code> option.</li>
<li>empty field disables this feature.</li>
</ul>
</li>
<li>9 (Reserved): Reserved for future use.</li>
</ul>
</li>
</ul>
<h3 id="etcgroup">/etc/group</h3>
<ul>
<li>plaintext file and contains critical group information.</li>
<li>644 permissions by default and owned by root.</li>
<li>Each row in the file stores information for one group entry.</li>
<li>Every user on the system must be a member of at least one group (User Private Group (UPG)).</li>
<li>a group name matches the username it is associated with by default</li>
<li>four colon-separated fields per line entry.
<ul>
<li>Field 1 (Group Name):
<ul>
<li>Holds a group name that must begin with a letter. Group names with up to 255 characters, including the</li>
<li>uppercase, underscore (_) and hyphen (-) characters, are also supported. (not recommended)</li>
</ul>
</li>
<li>Field 2 (Encrypted Password):
<ul>
<li>Can be empty or contain an “x” (points to the /etc/gshadow file for the actual password), or a hashed group-level password.</li>
<li>can set a password on a group for non-members to be able to change their group identity temporarily using the <code>newgrp </code>command.</li>
<li>non-members must enter the correct password in order to do so.</li>
</ul>
</li>
<li>Field 3 (GID):
<ul>
<li>Holds a GID, that is also placed in the GID field of the passwd file.</li>
<li>By default, groups are created with GIDs starting at 1000 and with the same name as the username.</li>
<li>system allows several users to belong to a single group</li>
<li>also allows a single user to be a member of multiple groups at the same time.</li>
</ul>
</li>
<li>Field 4 (Group Members):
<ul>
<li>Lists the membership for the group. (user’s primary group is always defined in the GID field of the passwd file.)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="etcgshadow">/etc/gshadow</h3>
<ul>
<li>no access permissions for any user (even root)</li>
<li>group passwords are hashed and stored</li>
<li>group names are used as a common key between the gshadow and group files.</li>
<li>000 permissions and owned by root</li>
<li>four colon-separated fields
<ul>
<li>Field 1 (Group Name):
<ul>
<li>Consists of a group name as appeared in the group file.</li>
</ul>
</li>
<li>Field 2 (Encrypted Password):
<ul>
<li>Can contain a hashed password, which may be set with the gpasswd command for non-group members to access the group temporarily using the newgrp command.</li>
<li>single exclamation mark (!) or a null value in this field allows group members password-less access and restricts non-members from switching into this group.</li>
</ul>
</li>
<li>Field 3 (Group Administrators):
<ul>
<li>Lists usernames of group administrators that are authorized to add or remove members with the gpasswd command.</li>
</ul>
</li>
<li>Field 4 (Members):
<ul>
<li>comma-separated list of members.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="gpasswd-command">gpasswd command:</h3>
<pre><code>- add group administrators.
- add or delete group members.
- assign or revoke a group-level password.
- disable the ability of the newgrp command to access a group. 
- picks up the default values from the /etc/login.defs file.
</code></pre>
<h3 id="useradd-and-logindefs-configuration-files">useradd and login.defs configuration files</h3>
<h3 id="useradd-command">useradd command</h3>
<ul>
<li>picks up the default values from the /etc/default/useradd and /etc/login.defs files for any options that are not specified at the command line when executing it.</li>
<li>login.defs file is also consulted by the usermod, userdel, chage, and passwd commands</li>
<li>Both files store several defaults including those that affect the password length and password lifecycle.
/etc/default/useradd Default Directives:</li>
<li>starting GID (GROUP) (provided the USERGROUPS_ENAB directive in the login.defs file is set to no)</li>
<li>home directory location (HOME),</li>
<li>number of inactivity days between password expiry and permanent account disablement (INACTIVE),</li>
<li>account expiry date (EXPIRE),</li>
<li>login shell (SHELL),</li>
<li>skeleton directory location to copy user initialization files from (SKEL)</li>
<li>whether to create mail spool directory (CREATE_MAIL_SPOOL)</li>
</ul>
<h3 id="etclogindefs-default-directives">/etc/login.defs default directives:</h3>
<p>MAIL_DIR</p>
<ul>
<li>mail directory location</li>
</ul>
<p>PASS_MAX_DAYS, PASS_MIN_DAYS, PASS_MIN_LEN, and PASS_WARN_AGE</p>
<ul>
<li>password aging attributes.</li>
</ul>
<p>UID_MIN, UID_MAX, GID_MIN, and GID_MAX</p>
<ul>
<li>ranges of UIDs and GIDs to be allocated to new users and groups</li>
</ul>
<p>SYS_UID_MIN, SYS_UID_MAX, SYS_GID_MIN, and SYS_GID_MAX</p>
<ul>
<li>ranges of UIDs and GIDs to be allocated to new service users and groups</li>
</ul>
<p>CREATE_HOME</p>
<ul>
<li>whether to create a home directory</li>
</ul>
<p>UMASK</p>
<ul>
<li>permissions to be set on the user home directory at creation based on this umask value</li>
</ul>
<p>USERGROUPS_ENAB</p>
<ul>
<li>whether to delete a user’s group (at the time of user deletion) if it contains no more members</li>
</ul>
<p>ENCRYPT_METHOD</p>
<ul>
<li>encryption method for user passwords</li>
</ul>
<h2 id="user-account-management">User Account Management</h2>
<h3 id="useradd-command-1">useradd Command</h3>
<ul>
<li>add a new user to the system</li>
<li>adds entries to the four user authentication files for each account added to the system</li>
<li>creates a home directory for the user and copies the default user startup files from the skeleton directory /etc/skel into the user’s home directory</li>
<li>used to update the default settings that are used at the time of new user creation for unspecified settings</li>
<li>Options
<ul>
<li>-b (&ndash;base-dir)
<ul>
<li>Defines the absolute path to the base directory for placing user home directories. The default is /home.</li>
</ul>
</li>
<li>-c (&ndash;comment)
<ul>
<li>Describes useful information about the user.</li>
</ul>
</li>
<li>-d (&ndash;home-dir)
<ul>
<li>Defines the absolute path to the user home directory.</li>
</ul>
</li>
<li>-D (&ndash;defaults)
<ul>
<li>Displays the default settings from the /etc/default/useradd file and modifies them.</li>
</ul>
</li>
<li>-e (&ndash;expiredate)
<ul>
<li>Specifies a date on which a user account is automatically disabled. The format for the date specification is YYYY-MM-DD.</li>
</ul>
</li>
<li>-f (&ndash;inactive)
<ul>
<li>Denotes maximum days of inactivity between password expiry and permanent account disablement.</li>
</ul>
</li>
<li>-g (&ndash;gid)
<ul>
<li>Specifies the primary GID. Without this option, a group account matching the username is created with the GID matching the UID.</li>
</ul>
</li>
<li>-G (&ndash;groups)
<ul>
<li>Specifies the membership to supplementary groups.</li>
</ul>
</li>
<li>-k (&ndash;skel)
<ul>
<li>location of the skeleton directory (default is /etc/skel) (stores default user startup files)
<ul>
<li>These files are copied to the user’s home directory at the time of account creation.</li>
<li>Three hidden bash shell files: (default)
<ul>
<li>.bash_profile, .bashrc, and .bash_logout</li>
<li>You can customize these files or add your own to be used for accounts created thereafter.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>-m (&ndash;create-home)
<ul>
<li>Creates a home directory if it does not already exist.</li>
</ul>
</li>
<li>-o (&ndash;non-unique)
<ul>
<li>Creates a user account sharing the UID of an existing user.</li>
<li>When two users share a UID, both get identical rights on each other’s files.</li>
<li>Should only be done in specific situations.</li>
</ul>
</li>
<li>-r (&ndash;system)
<ul>
<li>Creates a service account with a UID below 1000 and a never-expiring password.</li>
</ul>
</li>
<li>-s (&ndash;shell)
<ul>
<li>Defines the absolute path to the shell file. The default is /bin/bash.</li>
</ul>
</li>
<li>-u (&ndash;uid)
<ul>
<li>Indicates a unique UID. Without this option, the next available UID from the /etc/passwd file is used.</li>
</ul>
</li>
<li>login
<ul>
<li>Specifies a login name to be assigned to the user account.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="usermod-command">usermod Command</h3>
<ul>
<li>modify the attributes of an existing user</li>
<li>similar syntax to useradd and most switches identical.</li>
<li>Options unique to usermod:
<ul>
<li>-a (&ndash;append)
<ul>
<li>Adds a user to one or more supplementary groups</li>
</ul>
</li>
<li>-l (&ndash;login)
<ul>
<li>Specifies a new login name</li>
</ul>
</li>
<li>-m (&ndash;move-home)
<ul>
<li>Creates a home directory and moves the content over from the old location</li>
</ul>
</li>
<li>-G
<ul>
<li>Add a list of groups a user is a member of.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="userdel-command">userdel Command</h3>
<ul>
<li>to remove a user from the system</li>
</ul>
<h3 id="passwd-command">passwd Command</h3>
<ul>
<li>set or modify a user’s password</li>
</ul>
<h3 id="no-login-non-interactive-user-account">No-Login (Non-Interactive) User Account</h3>
<h3 id="nologin-command">nologin command</h3>
<ul>
<li>/sbin/nologin</li>
<li>special purpose program that can be employed for user accounts that do not require login access to the system.</li>
<li>located in the /usr/sbin (or /sbin) directory</li>
<li>user is refused with the message, “This account is currently not available.”</li>
<li>If a custom message is required, you can create a file called nologin.txt in the /etc directory and add the desired text to it.</li>
<li>If a no-login user is able to log in with their credentials, there is a problem. Use the grep command against the /etc/passwd file to ensure ‘/sbin/nologin’ is there in the shell field for that user.</li>
<li>examples of user accounts that do not require login access are the service accounts such as ftp, apache, and sshd.</li>
</ul>
<h2 id="basic-user-management-labs">Basic User Management Labs</h2>
<h3 id="lab-who">Lab: who</h3>
<pre tabindex="0"><code>who
</code></pre><h3 id="lab-what">Lab: what</h3>
<pre tabindex="0"><code>w
</code></pre><h3 id="lab-last">Lab: last</h3>
<ol>
<li>List all user login, logout, and system reboot occurrences:</li>
</ol>
<pre tabindex="0"><code>last
</code></pre><ol start="2">
<li>List system reboot info only:</li>
</ol>
<pre tabindex="0"><code>last reboot
</code></pre><h3 id="lab-lastb">Lab: lastb</h3>
<pre tabindex="0"><code>lastb
</code></pre><h3 id="lab-lastlog">Lab: lastlog</h3>
<pre tabindex="0"><code>lastlog
</code></pre><h3 id="lab-id">Lab: id</h3>
<ol>
<li>View info about currently active user:</li>
</ol>
<pre tabindex="0"><code>id
</code></pre><ol start="2">
<li>View info about another user:</li>
</ol>
<pre tabindex="0"><code>id user1
</code></pre><h3 id="lab-groups">Lab: groups</h3>
<ol>
<li>View current user&rsquo;s groups:</li>
</ol>
<pre tabindex="0"><code>groups
</code></pre><ol start="2">
<li>View groups of another user:</li>
</ol>
<pre tabindex="0"><code>groups user1
</code></pre><h3 id="lab-user-authentication-files">Lab: user authentication files</h3>
<ol>
<li>list of the four files and their backups from the /etc directory:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ls -l /etc/passwd* /etc/group* /etc/shadow* /etc/gshadow*
</span></span></code></pre></div><ol start="2">
<li>View first and last 3 lines of the passwd file</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">head -3 /etc/passwd <span class="p">;</span> tail -3 /etc/passwd
</span></span></code></pre></div><ol start="3">
<li>verify the permissions and ownership on the passwd file:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ls -l /etc/passwd
</span></span></code></pre></div><ol start="4">
<li>View first and last 3 lines of the shadow file:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">head -3 /etc/shadow <span class="p">;</span> tail -3 /etc/shadow
</span></span></code></pre></div><ol start="5">
<li>verify the permissions and ownership on the shadow file:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ls -l /etc/shadow
</span></span></code></pre></div><ol start="6">
<li>View first and last 3 lines of the group file:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">head -3 /etc/group <span class="p">;</span> tail -3 /etc/group
</span></span></code></pre></div><ol start="7">
<li>Verify the permissions and ownership on the group file:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ls -l /etc/group
</span></span></code></pre></div><ol start="8">
<li>View first and last 3 lines of the gshadow file:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">head -3 /etc/gshadow <span class="p">;</span> tail -3 /etc/gshadow
</span></span></code></pre></div><ol start="9">
<li>Verify the permissions and ownership on the gshadow file:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ls -l /etc/gshadow
</span></span></code></pre></div><h3 id="lab-useradd-and-logindefs">Lab: useradd and login.defs</h3>
<ol>
<li>use the cat or less command to view the useradd file content or display the settings with the useradd command:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -D
</span></span></code></pre></div><ol start="2">
<li>grep on the/etc/login.defs with uncommented and non-empty lines:</li>
</ol>
<pre tabindex="0"><code>grep -v ^# /etc/login.defs | grep -v ^$
</code></pre><h3 id="lab-create-a-user-account-with-default-attributes-root">Lab: Create a User Account with Default Attributes (root)</h3>
<ol>
<li>Create user2 with all the default directives:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd user2
</span></span></code></pre></div><ol start="2">
<li>Assign this user a password and enter it twice when prompted:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">passwd user2
</span></span></code></pre></div><ol start="3">
<li>grep for user2: on the authentication files to examine what the useradd command has added:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> /etc <span class="p">;</span> grep user2: passwd shadow group gshadow
</span></span></code></pre></div><ol start="4">
<li>Test this new account by logging in as user2 and then run the id and groups commands to verify the UID, GID, and group membership information:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su - user2
</span></span><span class="line"><span class="cl">id
</span></span><span class="line"><span class="cl">groups
</span></span></code></pre></div><h3 id="lab-create-a-user-account-with-custom-values">Lab: Create a User Account with Custom Values</h3>
<ol>
<li>Create user3 with UID 1010 (-u), home directory /usr/user3a (-d), and shell /bin/sh (-s):</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -u <span class="m">1010</span> -d /usr/user3a -s /bin/sh user3
</span></span></code></pre></div><ol start="2">
<li>Assign user1234 as password (passwords assigned in the following way is not recommended; however, it is okay in a lab environment):</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> user1234 <span class="p">|</span> passwd --stdin user3
</span></span></code></pre></div><ol start="3">
<li>grep for user3: on the four authentication files to see what was added for this user:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> /etc <span class="p">;</span> grep user3: passwd shadow group gshadow
</span></span></code></pre></div><ol start="4">
<li>Test this account by switching to or logging in as user3 and entering user1234 as the password. Run the id and groups commands for further verification.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su - user3 
</span></span><span class="line"><span class="cl">id
</span></span><span class="line"><span class="cl">groups
</span></span></code></pre></div><h3 id="lab-modify-and-delete-a-user-account">Lab: Modify and Delete a User Account</h3>
<ol>
<li>Modify the login name for user2 to user2new (-l), UID to 2000 (-u), home directory to /home/user2new (-m and -d), and login shell to /sbin/nologin (-s).</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">usermod -l user2new -m -d /home/user2new -s /sbin/nologin -u <span class="m">2000</span> user2
</span></span></code></pre></div><ol start="2">
<li>Obtain the information for user2new from the passwd file for confirmation:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grep user2new /etc/passwd
</span></span></code></pre></div><ol start="3">
<li>Remove user2new along with their home and mail spool directories (-r):</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">userdel -r user2new
</span></span></code></pre></div><ol start="4">
<li>Confirm the user deletion:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grep user2new /etc/passwd
</span></span></code></pre></div><h3 id="lab-create-a-user-account-with-no-login-access-root">Lab: Create a User Account with No-Login Access (root)</h3>
<ol>
<li>Look at the current nologin users:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grep nologin /etc/passwd
</span></span></code></pre></div><ol start="2">
<li>Create user4 with non-interactive shell file /sbin/nologin:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -s /sbin/nologin user4
</span></span></code></pre></div><ol start="3">
<li>Assign user1234 as password:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> user1234 <span class="p">|</span> passwd --stdin user4
</span></span></code></pre></div><ol start="4">
<li>grep for user4 on the passwd file and verify the shell field containing the nologin shell:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">grep user4 /etc/passwd
</span></span></code></pre></div><ol start="5">
<li>Test this account by attempting to log in or switch:</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su - user4
</span></span></code></pre></div><h3 id="lab-check-user-login-attempts-root">Lab: Check User Login Attempts (root)</h3>
<ol>
<li>execute the last, lastb, and lastlog commands, and observe the outputs.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">last
</span></span><span class="line"><span class="cl">lastb
</span></span><span class="line"><span class="cl">lastlog
</span></span></code></pre></div><ol start="2">
<li>List the timestamps when the system was last rebooted (last).</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">last <span class="p">|</span> grep reboot
</span></span></code></pre></div><h3 id="lab-5-2-verify-user-and-group-identity-user1">Lab 5-2: Verify User and Group Identity (user1)</h3>
<ol>
<li>run the who and w commands one at a time, and compare the outputs.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">who
</span></span><span class="line"><span class="cl">w
</span></span></code></pre></div><ol start="2">
<li>Execute the <code>id</code> and <code>groups</code> commands, and compare the outcomes. Examine the extra information that the id command shows, but not the groups command.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">id
</span></span><span class="line"><span class="cl">groups
</span></span></code></pre></div><h3 id="lab-5-3-create-users-root">Lab 5-3: Create Users (root)</h3>
<ol>
<li>create user account user4100 with UID 4100 and home directory under /usr.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -m -d /usr/user4100 -u <span class="m">4100</span> user4100 
</span></span></code></pre></div><ol start="2">
<li>Create another user account user4200 with default attributes.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd user4200
</span></span></code></pre></div><ol start="3">
<li>Assign both users a password.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">passwd user4100
</span></span><span class="line"><span class="cl">passwd user4200
</span></span></code></pre></div><ol start="4">
<li>View the contents of the passwd, shadow, group, and gshadow files, and observe what has been added for the two new users.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat /etc/passwd
</span></span><span class="line"><span class="cl">cat /etc/shadow
</span></span><span class="line"><span class="cl">cat /etc/group
</span></span><span class="line"><span class="cl">cat /etc/gshadow
</span></span></code></pre></div><h3 id="lab-create-user-with-non-interactive-shell-root">Lab: Create User with Non-Interactive Shell (root)</h3>
<ol>
<li>Create user account user4300 with the disability of logging in.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -s /sbin/nologin user4300
</span></span></code></pre></div><ol start="3">
<li>Assign this user a password.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">passwd user4300
</span></span></code></pre></div><ol start="5">
<li>Try to log on with this user and see is displayed on the screen.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">su - user4300
</span></span></code></pre></div><ol start="7">
<li>View the content of the passwd file, and see what is there that prevents this user from logging in.</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat /etc/passwd
</span></span></code></pre></div><h2 id="basic-user-management-review-questions">Basic User Management Review Questions</h2>
<p>Q. What would the command <code>useradd -D</code> do?
A. This command displays the defaults settings used at the time of user creation or modification.</p>
<hr>
<p>Q. What does the <code>lastlog</code> command do?
A. The <code>lastlog</code> command provides information about recent user logins.</p>
<hr>
<p>Q. What would the command <code>useradd user500</code> do?
A. The command provided will add user500 with all predefined default values.</p>
<hr>
<p>Q. The <code>id</code> and <code>groups</code> commands are useful for listing a user identification. True or False.
A. False. Only the <code>id</code> command is used for this purpose.</p>
<hr>
<p>Q. Name the four local user authentication files.
A. The passwd, shadow, group, and gshadow files.</p>
<hr>
<p>Q. The passwd file contains secondary user group information. True or False?
A. False. The passwd file contains primary user group information.</p>
<hr>
<p>Q. What is the first UID assigned to a normal user?
A. The first UID assigned to a normal user is 1000.</p>
<hr>
<p>Q. Name the three fundamental user account classes in RHEL.
A. The three fundamental user account categories are root, normal, and system.</p>
<hr>
<p>Q. Every user in RHEL gets a private group by default. True or False?
A. True.</p>
<hr>
<p>Q. What does the “x” in the password field in the passwd file imply?
A. The “x” in the password field implies that the hashed password is stored in the shadow file.</p>
<hr>
<p>Q. Name the file that the <code>who</code> command consults to display logged-in users.
A. The who command consults the /run/utmp file to list logged-in users.</p>
<hr>
<p>Q. What information does the <code>lastb</code> command provide?
A. The lastb command reports the history of unsuccessful user login attempts.</p>
<hr>
<p>Q. The <code>who</code> command may be used to view logged out users. True or False?
A. False. The who command shows currently logged-in users only.</p>
<hr>
<p>Q. What would the <code>userdel</code> command do if it is run with the <code>-r</code> option?
A. The <code>userdel</code> command with <code>-r</code> will delete the specified user along with their home directory.</p>
<hr>
<p>Q. What is the first GID assigned to a group?
A. The first GID assigned to a normal user is 1000.</p>
<hr>
<p>Q. What is the name of the default backup file for shadow?
A. The name of the default backup file for shadow is shadow-.</p>
<hr>
<p>Q. Which file does the <code>last</code> command consult to display reports?
A. The last command consults the /var/log/wtmp file to display reports.</p>
<hr>
<p>Q. UID 999 is reserved for normal users. True or False?
A. False. UID 999 is reserved for system accounts.</p>
<hr>
<p>A. Which file is assigned to users to deny them login access?
Q. The /sbin/nologin file is assigned to users to deny them login.</p>
<hr>
<p>Q. You execute the <code>lastb</code> command as a normal user. The output reports an error. What do you need to do to run this command successfully?
A. You need to run the <code>lastb</code> command as root or with the root privilege.</p>

            </div>
        </article></main>
</div>
<footer class="footer">
    <span class="footer_item"> </span>
    &nbsp;

    <div class="footer_social-icons">
<a href="https://github.com/davidvargasxyz" target="_blank" rel="noopener noreferrer me"
    title="Github">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
</a>
<a href="https://keybase.io/" target="_blank" rel="noopener noreferrer me"
    title="Keybase">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 76.3" version="1.1" fill="currentColor" stroke="none">
    <path
        d="M6.68 73.99c-.6-1.3-1.4-3.1-1.8-4l-.6-1.7-2 2.2-2 2.2-.2-4.2c-.3-6 .2-12.2 1.2-16.6 2.3-9.8 9.5-18.7 18.8-23.4l2.1-1-.5-1.5c-.3-.8-.6-2.5-.7-3.6l-.2-2.1-2.1-.2c-3.2-.3-4.9-1.2-6-3.5-.6-1.2-.6-1.4-.4-4.6.2-4.2.5-5.1 1.8-6.5 1.6-1.8 2.7-2.1 6.7-1.9 2.9.2 3.5.3 4.8.9.8.4 1.5.8 1.6.8.1 0 1-1.1 2.1-2.6l1.9-2.7 1.2.7c.7.4 1.5.9 1.9 1.1l.7.4-.6 1.5c-.3.8-.7 2.2-.8 2.9l-.2 1.4 1.7.2c6.1.6 10.7 4.3 12.4 9.9.5 1.8.5 5.3 0 7-.5 1.6-.5 1.7-.1 1.7.7 0 5.4 2.3 7.3 3.5 3.7 2.4 8 6.6 10.4 10.2 4.5 6.7 6.4 14 5.6 22-.4 4.8-1.3 8.6-2.9 12.3l-.6 1.4h-5l1.2-2.4c1.3-2.6 2.3-6.2 2.8-9.4.3-2.2.4-8.2.1-9.3l-.2-.7-1.3 1.4c-3.2 3.5-7.9 4.5-14.2 2.8-5.4-1.4-7.6-1.7-12.7-1.7-3.9 0-5.2.1-7.3.6-5.8 1.3-9.9 3.2-15.6 7.3-2.1 1.5-3.8 2.7-3.9 2.7-.1 0 .2-1 .6-2.3.4-1.3 1.1-3.4 1.5-4.8l.8-2.5-.9.9c-.5.5-1.9 1.9-3.1 3.2l-2.1 2.3.5 1.9c.6 2.5 2 5.6 3.5 7.9.6 1 1.1 1.8 1.1 1.9s-1.2.1-2.6.1h-2.6l-1.1-2.1zm8.8-24.2c4.8-5.1 8.7-9.2 8.8-9.2.1.1-.4 1.6-.9 3.3-3.3 10.4-4 12.4-3.9 12.5 0 0 1.2-.4 2.5-.9 8.5-3.7 18.4-4.2 28.9-1.4 4.7 1.2 6.5 1.2 8.8 0 1.3-.7 1.8-1.1 2.4-2.1 1.1-1.7 1.2-4.1.5-6.3-1.7-4.8-8.3-11-14.5-13.7-3.2-1.4-3.4-1.4-4.1-.7l-.6.6 2.6 3.2c1.4 1.7 2.9 3.6 3.1 4.1.6 1.2.7 3.1.1 4.3-.8 1.7-3.2 2.9-5.1 2.5-.8-.2-1.1-.1-1.9.5-2.2 1.6-4.6 1.2-6.6-1.2-1.6-1.8-2-2.7-2.1-4.5 0-.9-.3-2-.5-2.4-.3-.6-.4-1.3-.4-2.2l.1-1.4-1.3-.3c-1.8-.5-3.9-1.5-5.1-2.4-.6-.4-1.1-.8-1.3-.8s-1.5.6-2.9 1.3c-9.7 5-16 14.3-17 24.8-.1 1-.2 2.3-.3 2.8l-.1.9 1.1-1.1c.5-.5 4.9-5.1 9.7-10.2zm25.9-7.4c.9-.7 1.7-1.3 1.9-1.3.1 0 .4.3.7.7.5.8 1.4.8 1.8.1.3-.5.3-.6-5.6-7.8-3.5-4.3-4.2-5-4.7-5-1.2.1-.9 1 1 3.3l1.8 2.2-1 .8c-1.1 1-1.2 1.2-.5 1.8.5.5.6.4 1.6-.3l1.1-.7.7.6c.4.3.6.8.6.9 0 .2-.8.9-1.7 1.7-.9.7-1.6 1.5-1.6 1.7 0 .3.5 1.1 1.4 2.2.3.6.8.4 2.5-.9zm-10.3-14.2c.6-1.8 2.6-3.2 4.6-3.2 1.1 0 2.7.9 3.8 2.1l1 1.2.9-1.1c2.5-2.8 2.8-6.7.8-10.1-1.5-2.5-4.3-4-8.2-4.4-2.1-.2-2.6-.4-3.7-1.5l-.8-.8-.4.6c-.8 1.2-2.5 5.1-3 6.6-.7 2.3-.4 5.9.5 7.7.9 1.7 3.3 4 4 3.7.1.1.3-.3.5-.8zm-8.9-13.6c.2-.5.7-1.8 1.2-2.8.5-1 .9-2 .9-2.3 0-.9-1-1.3-3.7-1.5-2.4-.2-2.6-.1-3.1.4-.4.4-.6.9-.6 1.6 0 .6-.1 1.7-.2 2.6-.2 2.1.1 2.5 2.2 2.8 3.1.2 3 .2 3.3-.8zm-3.1-2.4c0-1.7.2-1.9 1.6-1.9h1.3v2.8h-2.8v-.9zm6.3 58.3c-.6-.6-.8-1-.8-2 0-1.9 1.1-3 2.9-3 1.7 0 2.9 1.2 2.9 2.9 0 1.8-1.1 2.8-3 2.9-1 0-1.4-.2-2-.8zm19.3.3a2.93 2.93 0 011.8-5.3c1.8 0 2.8 1.1 2.9 3 0 1.1-.1 1.4-.8 2s-1 .8-2 .8c-.9 0-1.5-.2-1.9-.5z" />
</svg>
</a>
<a href="index.xml" target="_blank" rel="noopener noreferrer me"
    title="Rss">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 11a9 9 0 0 1 9 9" />
    <path d="M4 4a16 16 0 0 1 16 16" />
    <circle cx="5" cy="19" r="1" />
</svg>
</a>
</div>
    <small class="footer_copyright">
        © 2024 David Vargas.
        Powered by <a href="https://github.com/hugo-sid/hugo-blog-awesome" target="_blank" rel="noopener">Hugo blog awesome</a>.
    </small>
</footer><a href="#" title="Go to top" id="totop">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" stroke="currentColor" viewBox="0 96 960 960">
    <path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197Z"/>
</svg>

</a>


    






    
    <script async src="http://localhost:1313/js/main.js" ></script>

    

</body>
</html>
